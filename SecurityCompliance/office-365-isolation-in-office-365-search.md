---
title: Isolamento dei Tenant Office 365 nella ricerca di Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: 'Riepilogo: Informazioni di isolamento tenant nella ricerca di Office 365.'
ms.openlocfilehash: cc73f3c157ffd20b3891a6b7c58e7d0b2adf4e55
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/27/2018
ms.locfileid: "22530198"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="a7c04-103">Ricerca dell’isolamento del tenant in Office 365</span><span class="sxs-lookup"><span data-stu-id="a7c04-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="a7c04-p101">Ricerca di SharePoint Online utilizza un modello di separazione tenant che offre un buon livello l'efficienza delle strutture di dati condivise con protezione contro la perdita tra tenant informazioni. Con questo modello è impedire le funzionalità di ricerca da:</span><span class="sxs-lookup"><span data-stu-id="a7c04-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="a7c04-106">Restituisce i risultati delle query contenenti documenti provenienti da altri tenant</span><span class="sxs-lookup"><span data-stu-id="a7c04-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="a7c04-107">Esposizione di informazioni sufficienti nei risultati della query che un utente esperto può derivare informazioni su altri tenant</span><span class="sxs-lookup"><span data-stu-id="a7c04-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="a7c04-108">Visualizzazione dello schema o le impostazioni da un altro tenant</span><span class="sxs-lookup"><span data-stu-id="a7c04-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="a7c04-109">Combinazione di elaborazione delle informazioni tra tenant o memorizzare i risultati nel tenant errato analitica</span><span class="sxs-lookup"><span data-stu-id="a7c04-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="a7c04-110">Mediante le voci di dizionario da un altro tenant</span><span class="sxs-lookup"><span data-stu-id="a7c04-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="a7c04-p102">Per ogni tipo di dati relativi al tenant, viene utilizzato uno o più livelli di protezione nel codice per impedire la perdita accidentale dei dati. I dati più importanti contengono la maggior parte dei livelli di protezione per verificare che un solo difetto non provoca la perdita di informazioni effettivamente o percepite come.</span><span class="sxs-lookup"><span data-stu-id="a7c04-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="a7c04-113">Separazione del tenant per l'indice di ricerca</span><span class="sxs-lookup"><span data-stu-id="a7c04-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="a7c04-p103">L'indice di ricerca viene memorizzato su disco nel server che ospitano i componenti di indicizzazione e il tenant di condividere i file di indice. Documenti indicizzati del tenant sono visibili solo per le query per il tenant. Tre meccanismi indipendenti impedire la perdita di informazioni:</span><span class="sxs-lookup"><span data-stu-id="a7c04-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="a7c04-117">Filtro dell'ID tenant</span><span class="sxs-lookup"><span data-stu-id="a7c04-117">Tenant ID filtering</span></span>
- <span data-ttu-id="a7c04-118">Prefisso termini ID tenant</span><span class="sxs-lookup"><span data-stu-id="a7c04-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="a7c04-119">Controlli ACL</span><span class="sxs-lookup"><span data-stu-id="a7c04-119">ACL checks</span></span>

<span data-ttu-id="a7c04-120">Tutti e tre i meccanismi sarebbe costretto a esito negativo per la ricerca restituire i documenti per il tenant errato.</span><span class="sxs-lookup"><span data-stu-id="a7c04-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="a7c04-121">Filtro dell'ID tenant e termini ID Tenant aggiunta come prefisso</span><span class="sxs-lookup"><span data-stu-id="a7c04-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="a7c04-p104">Prefissi ricerca ogni termine che viene indicizzato nell'indice full-text con l'ID tenant. Ad esempio, quando il termine "*foo*" è indicizzato per un tenant con ID "*123*", la voce di indice full-text è "*123foo.*"</span><span class="sxs-lookup"><span data-stu-id="a7c04-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="a7c04-p105">Tutte le query viene convertita in modo da includere l'ID tenant utilizzando un processo noto come filtro dell'ID tenant. Ad esempio, la query "*foo*" viene convertita in "<*guid*>. *Foo* E *ID tenant*: <*guid*> ", dove <*guid*> rappresenta i tenant che esegue la query. Questa conversione di query viene eseguita all'interno di ciascun nodo indice ed elaborazione delle query e il contenuto non può influire. Poiché l'ID viene aggiunto a tutte le query, la frequenza di un termine in altri tenant non è desunta cercando migliore corrispondenza di classificazione in un tenant.</span><span class="sxs-lookup"><span data-stu-id="a7c04-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="a7c04-p106">Prefisso termini ID tenant si verifica solo nell'indice full-text. Le ricerche già distribuito sul campo, ad esempio "*title: foo*", passare a un indice di ricerca sintetica cui termini non sono prefisso ID tenant. In realtà, le ricerche già distribuito sul campo includono il prefisso con il nome del campo. Ad esempio, la query "*title: foo*" viene convertita in "*fields.title:foo fields.tenantID AND*: <*guid*>." Poiché la frequenza di un termine non influire sulla classificazione dei risultati dell'indice di ricerca sintetica, non è necessario per la separazione dei tenant dal prefisso per termini. Per la ricerca già distribuito sul campo come "*titolo: foo*", separazione del contenuto tenant dipende dal filtro per la conversione di query ID tenant.</span><span class="sxs-lookup"><span data-stu-id="a7c04-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="a7c04-134">Controlli elenco degli accessi di documenti</span><span class="sxs-lookup"><span data-stu-id="a7c04-134">Document Access Control List Checks</span></span>
<span data-ttu-id="a7c04-p107">Ricerca controlla l'accesso ai documenti tramite ACL salvati nell'indice di ricerca. Sono indicizzato a tutti gli elementi con un set di termini in un campo ACL speciale. Il campo ACL contiene un termine per ogni gruppo o un utente che è possibile visualizzare il documento. Tutte le query è arricchita con un elenco di termini voce di elenco di controllo di accesso uno per ogni gruppo a cui appartiene l'utente autenticato.</span><span class="sxs-lookup"><span data-stu-id="a7c04-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="a7c04-139">Ad esempio, una query come "<*guid*>. *foo ID tenant AND*: <*guid*> "diventa:" <*guid*>. *foo ID tenant AND*: <*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*: <*ace2*> *OR docACL*: <*ace3*> *... *)"</span><span class="sxs-lookup"><span data-stu-id="a7c04-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="a7c04-p108">Poiché utente e gli identificatori di gruppo e pertanto le voci sono univoche, in tal modo un ulteriore livello di sicurezza tra tenant per i documenti sono visibili solo per alcuni utenti. Lo stesso avviene per il speciale "tutti tranne agli utenti esterni" ACE che concede l'accesso agli utenti regolari nel tenant. Ma poiché le voci per "Tutti" sono identiche per tutti i tenant, la separazione dei tenant per i documenti pubblici dipende dal filtro dell'ID tenant. Nega che sono inoltre supportate le voci. Augmentation query aggiunge una clausola che consente di rimuovere un documento dal risultato quando viene rilevata una corrispondenza con negata.</span><span class="sxs-lookup"><span data-stu-id="a7c04-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="a7c04-p109">Nella ricerca di Exchange Online, l'indice viene partizionata ID della cassetta postale per le cassette postali dell'utente singoli anziché tenant a ID sottoscrizione come SharePoint Online. Il meccanismo di partizionamento corrisponde a SharePoint Online, ma non esiste alcun ACL filtro.</span><span class="sxs-lookup"><span data-stu-id="a7c04-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
