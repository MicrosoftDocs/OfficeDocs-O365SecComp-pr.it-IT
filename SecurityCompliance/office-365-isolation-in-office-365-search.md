---
title: Isolamento tenant di Office 365 in Office 365 search
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: "Riepilogo: Descrizione dell'isolamento del tenant in Office 365 search."
ms.openlocfilehash: b9faae9f1d61af181807f60243890b5115c0d679
ms.sourcegitcommit: c94cb88a9ce5bcc2d3c558f0fcc648519cc264a2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/20/2019
ms.locfileid: "30090808"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="9cc61-103">Isolamento del tenant per la funzionalità di ricerca di Office 365</span><span class="sxs-lookup"><span data-stu-id="9cc61-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="9cc61-p101">La ricerca di SharePoint Online utilizza un modello di separazione tenant che bilancia l'efficienza delle strutture di dati condivise con una protezione dalle informazioni che fuoriescono tra i tenant. Con questo modello, vengono impedite le funzionalità di ricerca:</span><span class="sxs-lookup"><span data-stu-id="9cc61-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="9cc61-106">ReStituzione dei risultati delle query che contengono documenti provenienti da altri tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="9cc61-107">Esposizione di informazioni sufficienti nei risultati delle query che un utente esperto può dedurre informazioni su altri tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="9cc61-108">Visualizzazione dello schema o delle impostazioni di un altro tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="9cc61-109">Missaggio delle informazioni di elaborazione dell'analisi tra i tenant o i risultati dell'archiviazione nel tenant errato</span><span class="sxs-lookup"><span data-stu-id="9cc61-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="9cc61-110">Utilizzo di voci di dizionario da un altro tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="9cc61-p102">Per ogni tipo di dati del tenant, è possibile utilizzare uno o più livelli di protezione nel codice per evitare che si verifichino perdite accidentali di informazioni. I dati più critici hanno la maggior parte dei livelli di protezione per assicurarsi che un singolo difetto non provochi perdite di informazioni effettive o percepite.</span><span class="sxs-lookup"><span data-stu-id="9cc61-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="9cc61-113">Separazione tenant per l'indice di ricerca</span><span class="sxs-lookup"><span data-stu-id="9cc61-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="9cc61-p103">L'indice di ricerca è archiviato su disco nei server che ospitano i componenti di indicizzazione e i tenant condividono i file di indice. I documenti indicizzati di un tenant sono visibili solo per le query per il tenant. Tre meccanismi indipendenti impediscono la perdita di informazioni:</span><span class="sxs-lookup"><span data-stu-id="9cc61-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="9cc61-117">Filtro ID tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-117">Tenant ID filtering</span></span>
- <span data-ttu-id="9cc61-118">Prefisso dei termini dell'ID tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="9cc61-119">Controlli ACL</span><span class="sxs-lookup"><span data-stu-id="9cc61-119">ACL checks</span></span>

<span data-ttu-id="9cc61-120">Tutti e tre i meccanismi devono avere esito negativo affinché la ricerca restituisca i documenti al tenant errato.</span><span class="sxs-lookup"><span data-stu-id="9cc61-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="9cc61-121">Filtro ID tenant e prefisso dei termini dell'ID tenant</span><span class="sxs-lookup"><span data-stu-id="9cc61-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="9cc61-p104">Prefissi di ricerca ogni termine indicizzato nell'indice full-text con l'ID del tenant. Ad esempio, quando il termine "*foo*" è indicizzato per un tenant con ID "*123*", la voce nell'indice full-text è "*123foo".*</span><span class="sxs-lookup"><span data-stu-id="9cc61-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="9cc61-p105">Ogni query viene convertita in modo da includere l'ID tenant utilizzando un processo denominato filtro ID tenant. Ad esempio, la query "*foo*" viene convertita in "<*GUID*>. *foo* E *tenantID*: <*GUID*_GT_ ", dove <*GUID*> rappresenta il tenant che esegue la query. Questa conversione di query si verifica all'interno di ogni nodo di indice e né query né elaborazione del contenuto possono influire su di essa. Poiché l'ID tenant viene aggiunto a ogni query, la frequenza di un termine in altri tenant non può essere desunta guardando la migliore classificazione di corrispondenza in un tenant.</span><span class="sxs-lookup"><span data-stu-id="9cc61-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="9cc61-p106">Il prefisso dei termini dell'ID tenant si verifica solo nell'indice full-text. Le ricerche in campo, ad esempio "*title: foo*", passano a un indice di ricerca sintetico in cui i termini non sono preceduti dall'ID tenant. Al contrario, le ricerche in campo sono prefissate con il nome del campo. Ad esempio, la query "*title: foo*" viene convertita in "*Fields. title: foo and Fields. tenantID*: <*GUID*>". Poiché la frequenza di un termine non influenza la classificazione degli hit nell'indice di ricerca sintetico, non è necessario che la separazione dei tenant venga prefissata per termine. Per una ricerca in campo come "*title: foo*", la separazione del contenuto del tenant dipende dal filtro dell'ID tenant tramite la conversione delle query.</span><span class="sxs-lookup"><span data-stu-id="9cc61-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="9cc61-134">Controlli dell'elenco di controllo di accesso ai documenti</span><span class="sxs-lookup"><span data-stu-id="9cc61-134">Document Access Control List Checks</span></span>
<span data-ttu-id="9cc61-p107">La ricerca controlla l'accesso ai documenti tramite gli elenchi ACL salvati nell'indice di ricerca. Ogni elemento viene indicizzato con un set di termini in un campo ACL speciale. Il campo ACL contiene un termine per gruppo o utente che può visualizzare il documento. Ogni query viene aumentata con un elenco di termini ACE (Access Control Entry), uno per ogni gruppo a cui appartiene l'utente autenticato.</span><span class="sxs-lookup"><span data-stu-id="9cc61-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="9cc61-139">Ad esempio, una query come "<*GUID*>. *foo e tenantID*: <*GUID*> "diventa:" <*GUID*>. *foo e tenantID*: <*GUID*> *e* (*docACL:*<*ace1*> *o docACL*: <*ace2*> *o docACL*: <*ACE3*> \*... \*)"</span><span class="sxs-lookup"><span data-stu-id="9cc61-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="9cc61-p108">Poiché gli identificatori di utenti e gruppi e quindi gli ACE sono univoci, questo fornisce un livello di sicurezza supplementare tra i tenant per i documenti visibili solo ad alcuni utenti. Lo stesso vale per l'ACE speciale "tutti tranne gli utenti esterni" che concede l'accesso agli utenti abituali del tenant. Tuttavia, poiché gli ACE per "tutti" sono uguali per tutti i tenant, la separazione dei tenant per i documenti pubblici dipende dal filtro dell'ID tenant. Anche le voci ACE Deny sono supportate. L'incremento di query aggiunge una clausola che consente di rimuovere un documento dal risultato quando è presente una corrispondenza con una ACE di negazione.</span><span class="sxs-lookup"><span data-stu-id="9cc61-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="9cc61-p109">In ricerca di Exchange Online, l'indice è partizionato sull'ID cassetta postale per le cassette postali dell'utente anziché sull'ID tenant (ID sottoscrizione) come in SharePoint Online. Il meccanismo di partizionamento è identico a quello di SharePoint Online, ma non è presente alcun filtro ACL.</span><span class="sxs-lookup"><span data-stu-id="9cc61-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
