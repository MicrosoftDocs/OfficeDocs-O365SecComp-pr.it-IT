---
title: Resilienza dei dati di Exchange di Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: Spiegazione dei vari aspetti della resilienza dei dati all'interno di Exchange Online e Office 365.
ms.openlocfilehash: 8d0448a95f010b766faf852a374513a1c2da61fa
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/27/2018
ms.locfileid: "22530694"
---
# <a name="exchange-online-data-resiliency-in-office-365"></a><span data-ttu-id="fa1a1-103">Resilienza dei dati in linea di Exchange in Office 365</span><span class="sxs-lookup"><span data-stu-id="fa1a1-103">Exchange Online Data Resiliency in Office 365</span></span>

## <a name="introduction"></a><span data-ttu-id="fa1a1-104">Introduzione</span><span class="sxs-lookup"><span data-stu-id="fa1a1-104">Introduction</span></span>
<span data-ttu-id="fa1a1-p101">Esistono due tipi di danneggiamento che possono influire su un database di Exchange: danneggiamento fisico, che può essere causato da problemi hardware (in particolare, hardware di archiviazione), e danneggiamento logico che si verifica a causa di altri fattori. In generale, esistono due tipi di danneggiamento logico che possono verificarsi all'interno di un database di Exchange:</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p101">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors. Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="fa1a1-p102">**Danneggiamento logico di database** - corrisponde a checksum di pagina di database, ma i dati nella pagina non sono corrette logicamente. Ciò può verificarsi quando il motore di database (il motore di ESE (Extensible Storage)) tenterà di scrivere una pagina del database e anche se il sistema operativo restituisce un messaggio di conferma, i dati non vengono sia mai scritti su disco o viene scritto nella posizione errata. Questa operazione viene definita una *perdita flush*. ESE include numerose funzionalità e misure di protezione che sono progettati per evitare il danneggiamento fisico di un database e altri scenari di perdita di dati. Per impedire la perdita di dati di scaricamenti perse, ESE include un meccanismo di rilevamento flush perse nel database con una caratteristica (ripristino singola pagina) per correggere i dati.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p102">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically. This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place. This is referred to as a *lost flush*. ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios. To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="fa1a1-p103">**Danneggiamento logico dell'archivio** - dati viene aggiunto, eliminato o modificato in modo che l'utente non si aspettano. Questi casi sono in genere causati da applicazioni di terze parti. In genere è danneggiato preferibile che l'utente visualizza il danneggiamento. Archivio di Exchange considera la transazione che ha generato il danneggiamento logico da una serie di operazioni MAPI valide. Le funzionalità di [Archiviazione sul posto](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) in Exchange Online è assicurata dall'archivio danneggiamento logico (perché per impedire che il contenuto viene eliminato definitivamente da un utente o di un'applicazione).</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p103">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect. These cases are generally caused by third-party applications. It's generally only corruption in the sense that the user views it as corruption. The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations. The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="fa1a1-p104">Exchange Online consente di eseguire verifiche di coerenza diversi nel file di registro replicati durante l'ispezione di registro sia la riesecuzione del registro. Tali verifiche di coerenza evitare il danneggiamento fisico la replica dal sistema. Ad esempio, durante l'ispezione di registro, non esiste una verifica di integrità fisica che consente di verificare il file di registro e convalida che checksum registrato nel file di registro corrisponda checksum generato in memoria. Inoltre, l'intestazione del file di registro viene esaminato per verificare che la firma del file di log registrata nell'intestazione del registro corrisponda a quello del file di registro. Durante la riproduzione dei registri, il file di registro viene sottoposto a un'ulteriore esame minuzioso. Ad esempio, l'intestazione del database contiene inoltre la firma di registro che viene confrontata con firma del file di registro per verificare che devono essere uguali.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p104">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay. These consistency checks prevent physical corruption from being replicated by the system. For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory. In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file. During log replay, the log file undergoes further scrutiny. For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="fa1a1-p105">Protezione da danneggiamento dei dati delle cassette postali in Exchange Online è possibile utilizzare Exchange Native Data Protection, una strategia di resilienza che utilizza la replica a livello di applicazione in più server e più centri dati con altri caratteristiche che consentono di proteggere i dati da persi a causa di danneggiamento o per altri motivi. Tali caratteristiche includono funzionalità native gestite da Microsoft o l'applicazione di Exchange Online, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p105">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons. These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="fa1a1-125">Gruppi di disponibilità dei dati</span><span class="sxs-lookup"><span data-stu-id="fa1a1-125">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="fa1a1-126">Correzione singolo Bit</span><span class="sxs-lookup"><span data-stu-id="fa1a1-126">Single Bit Correction</span></span> 
- <span data-ttu-id="fa1a1-127">Analisi del Database in linea</span><span class="sxs-lookup"><span data-stu-id="fa1a1-127">Online Database Scanning</span></span> 
- <span data-ttu-id="fa1a1-128">Rilevamento Flush perso</span><span class="sxs-lookup"><span data-stu-id="fa1a1-128">Lost Flush Detection</span></span> 
- <span data-ttu-id="fa1a1-129">Ripristino di singola pagina</span><span class="sxs-lookup"><span data-stu-id="fa1a1-129">Single Page Restore</span></span> 
- <span data-ttu-id="fa1a1-130">Servizio di replica delle cassette postali</span><span class="sxs-lookup"><span data-stu-id="fa1a1-130">Mailbox Replication Service</span></span> 
- <span data-ttu-id="fa1a1-131">Controlli di File di registro</span><span class="sxs-lookup"><span data-stu-id="fa1a1-131">Log File Checks</span></span> 
- <span data-ttu-id="fa1a1-132">Distribuzione in resiliente File System</span><span class="sxs-lookup"><span data-stu-id="fa1a1-132">Deployment on Resilient File System</span></span> 

<span data-ttu-id="fa1a1-p106">Per ulteriori informazioni sulle funzionalità native sopra elencati, fare clic sui collegamenti sopra e vedere di seguito per ulteriori informazioni e per informazioni dettagliate sugli elementi senza collegamenti ipertestuali. Oltre a queste funzionalità native, Exchange Online include anche funzionalità di resilienza dei dati che i clienti possono gestire, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p106">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks. In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="fa1a1-135">Ripristino di un elemento singolo (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="fa1a1-135">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="fa1a1-136">Conservazione in locale e per controversia legale</span><span class="sxs-lookup"><span data-stu-id="fa1a1-136">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="fa1a1-137">Eliminato il mantenimento degli elementi e le cassette postali Soft-Deleted (sia abilitata per impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="fa1a1-137">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="fa1a1-138">Gruppi di disponibilità del database</span><span class="sxs-lookup"><span data-stu-id="fa1a1-138">Database Availability Groups</span></span> 
<span data-ttu-id="fa1a1-p107">Ogni database delle cassette postali in Office 365 è ospitata in un [gruppo di disponibilità del database (DAG)](https://docs.microsoft.com/exchange/back-up-email) e replicate in diverse aree geografiche separata centri dati all'interno dell'area stessa. La configurazione più comune è quattro copie del database in quattro datacenter; Tuttavia, alcune aree hanno un numero inferiore datacenter (database vengono replicati in tre datacenter in India e due datacenter in Australia e Giappone). Ma in tutti i casi, tutti i database delle cassette postali con quattro copie che vengono distribuite su più centri dati, in modo da assicurare che dati delle cassette postali sono protetto da software, hardware e anche gli errori di Data Center.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p107">Every mailbox database in Office 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region. The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan). But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="fa1a1-p108">Da questi quattro copie tre di questi sono configurati per la disponibilità elevata. La quarta copia viene configurata come una [copia del database ritardate](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). La copia ritardata del database non è progettata per il ripristino di singole cassette postali o il ripristino di elementi della cassetta postale. Lo scopo è per fornire un meccanismo di ripristino per l'evento raro del livello di sistema e grave danneggiamento logico.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p108">Out of these four copies, three of them are configured as highly available. The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery. Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="fa1a1-p109">Copia ritardata del database in Exchange Online devono essere configurate con un intervallo di riesecuzione di sette giorni log file. Inoltre, il gestore di ritardo di riesecuzione di Exchange è abilitato per offrire dinamico log file di riproduzione per le copie ritardate consentire di copie del database ritardate ripristino automatico e gestire le dimensioni dei file registro. Sebbene del database ritardate copie vengono utilizzate in Exchange Online, è importante tenere presente che non sono garantiti backup punto nel tempo. Copia ritardata del database in Exchange Online hanno una soglia di disponibilità, in genere circa il 90%, a causa di periodi di cui si perde un errore del disco, la copia ritardata diventare un'elevata disponibilità il disco contenente una copia ritardata copiare (a causa di automatica di riproduzione), nonché come i periodi in cui la copia ritardata del database è compilando nuovamente il Registro di riesecuzione delle code.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p109">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time. In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth. Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup. Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="fa1a1-150">Resilienza del trasporto</span><span class="sxs-lookup"><span data-stu-id="fa1a1-150">Transport Resilience</span></span> 
<span data-ttu-id="fa1a1-p110">Exchange Online include due funzionalità di resilienza trasporto primario: ridondanza Shadow e rete sicura. Ridondanza shadow consente di mantenere una copia di riserva di un messaggio mentre è in corso. Rete sicura consente di mantenere una copia di riserva di un messaggio dopo che il messaggio viene recapitato con successo.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p110">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net. Shadow Redundancy keeps a redundant copy of a message while it is in transit. Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="fa1a1-p111">Con ridondanza Shadow, ogni server di trasporto di Exchange Online crea una copia di ogni i messaggi ricevuti prima riconosce correttamente la ricezione del messaggio al server di invio. In questo modo tutti i messaggi nella pipeline di trasporto ridondanti in transito. Se Exchange Online determina che il messaggio originale è stato perso in transito, ridistribuisce una copia di riserva del messaggio.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p111">With Shadow Redundancy, each Exchange Online transport server makes a copy of each messages it receives before it acknowledges successfully receiving the message to the sending server. This makes all messages in the transport pipeline redundant while in transit. If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="fa1a1-p112">Rete sicura è una coda di trasporto associato al servizio di trasporto in un server cassette postali. Questa coda vengono archiviate copie dei messaggi che sono state elaborate correttamente dal server. Quando un errore di database o un server cassette postali richiede l'attivazione di una copia del database delle cassette postali non aggiornata, i messaggi nella coda di rete sicura vengono automaticamente inviati di nuovo alla nuova copia attiva del database delle cassette postali. Rete sicura è anche ridondanti, eliminando trasporto come un singolo punto di errore. Viene utilizzato il concetto di una rete sicura principale e una rete sicura ombreggiatura in cui se la rete sicura principale non è disponibile per più di 12 ore, inviare nuovamente le richieste di diventano le richieste di reinvio ombreggiatura e i messaggi vengono nuovamente recapitati dalla rete sicura ombreggiatura.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p112">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server. This queue stores copies of messages that were successfully processed by the server. When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database. Safety Net is also redundant, thereby eliminating transport as a single point of failure. It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="fa1a1-p113">Resubmissions messaggi dalla rete sicura vengono avviati automaticamente dal componente Active Manager del servizio replica di Microsoft Exchange che gestisce DAG e cassetta postale di copie del database. Nessuna azione manuale vengono richiesto di reinvio dei messaggi dalla rete sicura.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p113">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies. No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="fa1a1-164">Correzione singolo Bit</span><span class="sxs-lookup"><span data-stu-id="fa1a1-164">Single Bit Correction</span></span> 
<span data-ttu-id="fa1a1-p114">ESE include un meccanismo per rilevare e risolvere gli errori CRC di bit singolo (ovvero bit singolo capovolge) che derivano da errori hardware (e in quanto tale che essi rappresentano danneggiamento fisico). Quando si verificano tali errori, li corregge automaticamente ESE e registri un evento nel registro eventi.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p114">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption). When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="fa1a1-167">Analisi del Database in linea</span><span class="sxs-lookup"><span data-stu-id="fa1a1-167">Online Database Scanning</span></span> 
<span data-ttu-id="fa1a1-p115">Database online analisi (noto anche come *checksumming database*) è il processo in cui un ESE utilizza una verifica di coerenza database per ogni pagina di lettura e controllare danneggiato pagina. Lo scopo principale consiste nel rilevare danneggiamento fisico e cancellazioni perse che potrebbero non essere Guida rilevati dalle operazioni transazionali. Analisi dei database esegue inoltre operazioni successive all'archivio arresto anomalo del sistema. Spazio può essere compromesso a causa di arresti anomali e analisi dei database in linea consente di trovare e consente di recuperare spazio perso. Il sistema è progettato partendo dal presupposto che tutti i database vengono esaminati completamente una volta ogni sette giorni.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p115">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption. The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations. Database scanning also performs post-store crash operations. Space can be leaked due to crashes, and online database scanning finds and recovers lost space. The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="fa1a1-173">Rilevamento Flush perso</span><span class="sxs-lookup"><span data-stu-id="fa1a1-173">Lost Flush Detection</span></span> 
<span data-ttu-id="fa1a1-p116">Si verifica uno svuotamento perso durante un'operazione di scrittura del database che il sistema operativo/sottosistema del disco restituito come completata non effettivamente scritte a disco o è stato scritto nella posizione errata. Perso risolte flush può risultato di danneggiamento logiche dei database, in modo per evitare che perse scaricamenti causando la perdita di dati, ESE include un meccanismo di rilevamento flush perso. Quando le pagine del database vengono scritti copie passive, viene eseguita una verifica di scaricamenti perse sulla copia attiva. Se viene rilevato un scaricamento perso, ESE può ripristinare il processo di utilizzo di una pagina applicazione di patch processo.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p116">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location. Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism. As database pages are written to passive copies, a check is performed for lost flushes on the active copy. If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="fa1a1-178">Ripristino di singola pagina</span><span class="sxs-lookup"><span data-stu-id="fa1a1-178">Single Page Restore</span></span> 
<span data-ttu-id="fa1a1-p117">Ripristino di singola pagina, ovvero *applicate patch per pagina*, è un processo automatico in pagine di database danneggiato sono state sostituite da copie integre da una replica integra. Il processo di ripristino di una pagina danneggiato varia a seconda che la copia del database attivo o passivo. Quando una copia del database attivo viene rilevata una pagina danneggiata, è possibile copiare una pagina da una delle proprie repliche fornita la pagina che viene copiata viene aggiornata. Questa operazione viene eseguita mediante l'inserimento di una richiesta per la pagina nel flusso di log, che costituisce la base di replica del database delle cassette postali. Non appena una replica rileva la richiesta della pagina che viene inviata una copia della pagina per la copia del database richiedente. Ripristino di singola pagina offre inoltre un meccanismo di comunicazione asincrona per l'oggetto attivo richiedere una pagina di repliche, anche se le repliche sono attualmente non in linea.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p117">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica. The repair process for a corrupt page depends on whether the database copy is active or passive. When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date. This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication. As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy. Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="fa1a1-p118">In caso di danneggiamento in una copia passiva del database, tra cui una copia ritardata del database, dal momento che queste copie sono sempre dietro le copie attive, in genere consigliabile copiare qualsiasi pagina dalla copia attiva una copia passiva. Una copia passiva del database è dalla natura altamente disponibile, in modo che durante la pagina applicazione di patch processo, viene sospesa la riproduzione di registro, ma la copia registro continua. La copia passiva del database consente di recuperare una copia della pagina danneggiata dalla copia attiva, si attende che il file di registro che soddisfi il requisito di generazione massima registro richiesti viene copiato esaminato e quindi le patch della pagina danneggiata. Una volta che la pagina è stata aggiornata, riprende la riproduzione dei registri. Il processo è lo stesso per la copia ritardata del database, ad eccezione del fatto che il database ritardato riesegue innanzitutto tutti i file di registro necessari ottenere uno stato di inserimento.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p118">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy. A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues. The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page. Once the page has been patched, log replay resumes. The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="fa1a1-190">Servizio di replica delle cassette postali</span><span class="sxs-lookup"><span data-stu-id="fa1a1-190">Mailbox Replication Service</span></span> 
<span data-ttu-id="fa1a1-p119">Spostamento delle cassette postali è una parte essenziale di gestione di un servizio di posta elettronica su larga scala. Sono sempre aggiornate tecnologie e gli aggiornamenti hardware e la versione di gestione di, in modo con un'efficace limitate sistema che consente l'i tecnici eseguire questa operazione mantenendo la cassetta postale Sposta trasparente per gli utenti (verificando rimanere in linea nel corso del processo) è chiave e controllando che il processo di scalabilità normalmente come ottenere di cassette postali di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p119">Moving mailboxes is a key part of managing a large-scale email service. There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="fa1a1-p120">Exchange Mailbox Replication Service (MRS) è responsabile per lo spostamento delle cassette postali tra database. Durante lo spostamento MRS della coerenza su tutti gli elementi nella cassetta postale. Se viene rilevato un problema di coerenza, MRS verrà correggere il problema o ignorare gli elementi danneggiati, eliminando danneggiamento dalla cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p120">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases. During the move, MRS performs a consistency check on all items within the mailbox. If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="fa1a1-p121">Poiché MRS è un componente di Exchange Online, è possibile modificare il relativo codice in modo da indirizzo nuove forme di danneggiamento rilevati in futuro. Ad esempio, se viene rilevato un problema di coerenza MRS non è in grado di risolvere, è possibile analizzare il danneggiamento, modificare il codice MRS e correggere il problema (se è comprendere come).</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p121">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future. For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="fa1a1-198">Controlli di File di registro</span><span class="sxs-lookup"><span data-stu-id="fa1a1-198">Log File Checks</span></span> 
<span data-ttu-id="fa1a1-p122">Tutti i file di registro delle transazioni generati da un database di Exchange essere sottoposti a diverse forme di verifiche di coerenza. Quando viene creato un file di registro, fine prima cosa viene scritto un modello di bit e quindi viene eseguita una serie di operazioni di scrittura del registro. In questo modo Exchange Online per l'esecuzione di una serie di controlli, scaricamento persa, CRC e altri controlli per convalidare ogni file di registro in cui vengono scritti e nuovamente viene replicato.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p122">All transaction log files generated by an Exchange database undergo several forms of consistency checks. When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed. This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="fa1a1-202">Distribuzione in resiliente File System</span><span class="sxs-lookup"><span data-stu-id="fa1a1-202">Deployment on Resilient File System</span></span> 
<span data-ttu-id="fa1a1-p123">Per evitare il danneggiamento non si verificherà il livello di file system, Exchange Online viene distribuito su partizioni resiliente File System (ReFS) per fornire funzionalità migliorate di ripristino. ReFS è un file system in Windows Server 2012 e versioni successive è progettato per essere più resiliente dal danneggiamento dei dati che consentono di ottimizzare l'integrità e disponibilità dei dati. In particolare, ReFS permette di utilizzare miglioramenti in modo che sia aggiornati i metadati che offre maggiore protezione per i dati e si riduce il caso di danneggiamento dei dati. Checksum viene inoltre utilizzato per verificare l'integrità dei dati dei file e metadati assicurarsi che il danneggiamento dei dati sono facilmente rilevati e riparati.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p123">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities. ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity. Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases. It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="fa1a1-207">Exchange Online sfrutta i vantaggi ReFS diversi:</span><span class="sxs-lookup"><span data-stu-id="fa1a1-207">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="fa1a1-p124">Resilienza ulteriori sull'integrità dei dati significa meno interventi di danneggiamento dei dati. Riduzione del numero di problemi di danneggiamento significa meno del reseeding del database non necessari.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p124">More resiliency in data integrity means fewer data corruption incidents. Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="fa1a1-210">Checksum in esecuzione sui metadati abilitazione rilevamenti casi danneggiamento più rapidamente e in modo più deterministico, che consente di correggere i dati dei clienti danneggiamento prima che si verificano errori grigi per i volumi di dati.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-210">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="fa1a1-211">Progettato per funzionare anche con estremamente grandi quantità di dati, ovvero petabyte e grandi dimensioni, ovvero senza impatto sulle prestazioni</span><span class="sxs-lookup"><span data-stu-id="fa1a1-211">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="fa1a1-212">Supporto per altre funzionalità utilizzati da Exchange Online, ad esempio BitLocker.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-212">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="fa1a1-213">Exchange Online anche ai vantaggi da altre caratteristiche ReFS:</span><span class="sxs-lookup"><span data-stu-id="fa1a1-213">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="fa1a1-p125">**Integrità (integrità flussi)** - ReFS archivia i dati in modo da protegge da molti degli errori comuni in genere possono causare perdite di dati. Ricerca di Office 365 utilizza i flussi di integrità al fine di facilitare il rilevamento di danneggiamento anticipati su disco e checksum di contenuto del file. La caratteristica riduce inoltre risolte danneggiamento causate da "Strappata scrive" (durante un'operazione di scrittura non viene completata a causa di interruzioni dell'alimentazione, ecc.).</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p125">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss. Office 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content. The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="fa1a1-p126">**Disponibilità (salvataggio)** - ReFS assegna una priorità la disponibilità dei dati. In passato, file System spesso sono soggetti a danneggiamento dei dati che richiede il sistema disconnesso per il ripristino. Sebbene rari caso danneggiamento implementa ReFS di salvataggio, una caratteristica che consente di rimuovere i dati danneggiati dallo spazio dei nomi in un volume live e garantisce che una buona dati non hanno conseguenze negative dai dati danneggiati non ripristinabile. Applicare la caratteristica di salvataggio e isolare il danneggiamento dei dati di Exchange Online volumi del database significa che è possibile gestire in modo non interessato database su un volume danneggiato ottimale tra il momento dell'azione danneggiamento e il ripristino. In questo modo aumenta la disponibilità del database che normalmente potrebbe essere influenzate dalle quali problemi di danneggiamento del disco.</span><span class="sxs-lookup"><span data-stu-id="fa1a1-p126">**Availability (Salvage)** - ReFS prioritizes the availability of data. Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair. Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data. Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action. This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 