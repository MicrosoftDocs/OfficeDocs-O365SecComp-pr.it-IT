---
title: Utilizzare il caricamento di rete per importare i file PST crittografati con RMS su Office 365
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: 5/29/2018
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.collection: M365-security-compliance
localization_priority: Normal
search.appverid:
- MOE150
- MED150
- MET150
ms.assetid: 84a595b8-cd77-4f66-ac52-57a33ddd4773
description: Informazioni su come utilizzare il caricamento di rete per importare i file PST crittografati con RMS nelle cassette postali degli utenti in Office 365.
ms.openlocfilehash: e14c5a7260bc8b2092075dd2ab711f4da2d3b9c2
ms.sourcegitcommit: 9d67cb52544321a430343d39eb336112c1a11d35
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/17/2019
ms.locfileid: "34157998"
---
# <a name="use-network-upload-to-import-rms-encrypted-pst-files-to-office-365"></a><span data-ttu-id="9c043-103">Utilizzare il caricamento di rete per importare i file PST crittografati con RMS su Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-103">Use network upload to import RMS-encrypted PST files to Office 365</span></span>

<span data-ttu-id="9c043-104">**Questo articolo è per gli amministratori. Si sta tentando di importare i file PST nella propria cassetta postale? Vedere [importare messaggi di posta elettronica, contatti e calendario da un file PST di Outlook](https://go.microsoft.com/fwlink/p/?LinkID=785075)**</span><span class="sxs-lookup"><span data-stu-id="9c043-104">**This article is for administrators. Are you trying to import PST files to your own mailbox? See [Import email, contacts, and calendar from an Outlook .pst file](https://go.microsoft.com/fwlink/p/?LinkID=785075)**</span></span>
   
<span data-ttu-id="9c043-105">Utilizzare l'opzione caricamento di rete e il servizio di importazione di Office 365 per importare i file PST nelle cassette postali degli utenti.</span><span class="sxs-lookup"><span data-stu-id="9c043-105">Use the network upload option and the Office 365 Import service to import PST files to user mailboxes.</span></span> <span data-ttu-id="9c043-106">Caricamento di rete significa che si caricano i file PST un'area di archiviazione temporanea nel cloud Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9c043-106">Network upload means that you upload the PST files a temporary storage area in the Microsoft cloud.</span></span> <span data-ttu-id="9c043-107">Successivamente, il servizio di importazione di Office 365 copia i file PST dall'area di archiviazione nelle cassette postali degli utenti di destinazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-107">Then the Office 365 Import service copies the PST files from the storage area to the target user mailboxes.</span></span> <span data-ttu-id="9c043-108">Una nuova funzionalità del servizio di importazione consente di crittografare i file PST prima che vengano caricati e archiviati nel cloud Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9c043-108">A new feature of the Import service lets you encrypt your PST files before they are uploaded and stored on the Microsoft cloud.</span></span> <span data-ttu-id="9c043-109">Questi file verranno decrittografati durante l'importazione verso le cassette postali dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-109">These files will be un-encrypted when they're imported to user mailboxes.</span></span> 
  
<span data-ttu-id="9c043-110">Di seguito sono riportati i passaggi necessari per crittografare e importare i file PST nelle cassette postali di Office 365:</span><span class="sxs-lookup"><span data-stu-id="9c043-110">Here are the steps required to encrypt and import PST files to Office 365 mailboxes:</span></span>
  
[<span data-ttu-id="9c043-111">Passaggio 1: configurare Azure Rights Management per l'importazione PST</span><span class="sxs-lookup"><span data-stu-id="9c043-111">Step 1: Set up Azure Rights Management for PST Import</span></span>](#step-1-set-up-azure-rights-management-for-pst-import)

[<span data-ttu-id="9c043-112">Passaggio 2: generare una chiave di crittografia per l'importazione PST</span><span class="sxs-lookup"><span data-stu-id="9c043-112">Step 2: Generate an encryption key for PST Import</span></span>](#step-2-generate-an-encryption-key-for-pst-import)

[<span data-ttu-id="9c043-113">Passaggio 3: ottenere l'ID tenant RMS e l'URL delle licenze</span><span class="sxs-lookup"><span data-stu-id="9c043-113">Step 3: Obtain RMS tenant ID and licensing URL</span></span>](#step-3-obtain-rms-tenant-id-and-licensing-url)

[<span data-ttu-id="9c043-114">Passaggio 4: scaricare gli strumenti di importazione PST e copiare l'URL SAS</span><span class="sxs-lookup"><span data-stu-id="9c043-114">Step 4: Download the PST Import tools and copy the SAS URL</span></span>](#step-4-download-the-pst-import-tools-and-copy-the-sas-url)

[<span data-ttu-id="9c043-115">Passaggio 5: crittografare e caricare i file PST in Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-115">Step 5: Encrypt and upload your PST files to Office 365</span></span>](#step-5-encrypt-and-upload-your-pst-files-to-office-365)

[<span data-ttu-id="9c043-116">Optional Passaggio 6: visualizzazione di un elenco dei file PST caricati in Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-116">(Optional) Step 6: View a list of the PST files uploaded to Office 365</span></span>](#optional-step-6-view-a-list-of-the-pst-files-uploaded-to-office-365)

[<span data-ttu-id="9c043-117">Passaggio 7: creare il file di mapping di importazione PST</span><span class="sxs-lookup"><span data-stu-id="9c043-117">Step 7: Create the PST Import mapping file</span></span>](#step-7-create-the-pst-import-mapping-file)

[<span data-ttu-id="9c043-118">Passaggio 8: creare un processo di importazione PST in Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-118">Step 8: Create a PST Import job in Office 365</span></span>](#step-8-create-a-pst-import-job-in-office-365)
  
> [!IMPORTANT]
> <span data-ttu-id="9c043-119">È necessario eseguire il passaggio 1 del passaggio 4 solo una volta per impostare e configurare l'organizzazione per crittografare e importare i file PST nelle cassette postali di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-119">You have to perform Step 1 through Step 4 only once to set up and configure your organization to encrypt and import PST files to Office 365 mailboxes.</span></span> <span data-ttu-id="9c043-120">Dopo aver eseguito questa procedura, eseguire il passaggio 5 al passaggio 8 ogni volta che si desidera crittografare, caricare e importare un batch di file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-120">After you perform these steps, follow Step 5 through Step 8 each time you want to encrypt, upload, and import a batch of PST files.</span></span> 
  
<span data-ttu-id="9c043-121">Per ulteriori informazioni sull'importazione di dati in Office 365, vedere [Overview of import your organization PST files to office 365](importing-pst-files-to-office-365.md).</span><span class="sxs-lookup"><span data-stu-id="9c043-121">For more information about importing data to Office 365, see [Overview of importing your organization PST files to Office 365](importing-pst-files-to-office-365.md).</span></span>
  
## <a name="before-you-begin"></a><span data-ttu-id="9c043-122">Informazioni preliminari</span><span class="sxs-lookup"><span data-stu-id="9c043-122">Before you begin</span></span>

- <span data-ttu-id="9c043-123">È necessario essere assegnati al ruolo di esportazione delle cassette postali in Exchange Online per importare i file PST nelle cassette postali di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-123">You have to be assigned the Mailbox Import Export role in Exchange Online to import PST files to Office 365 mailboxes.</span></span> <span data-ttu-id="9c043-124">Per impostazione predefinita, questo ruolo non è assegnato a nessun gruppo di ruoli in Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="9c043-124">By default, this role isn't assigned to any role group in Exchange Online.</span></span> <span data-ttu-id="9c043-125">You can add the Mailbox Import Export role to the Organization Management role group.</span><span class="sxs-lookup"><span data-stu-id="9c043-125">You can add the Mailbox Import Export role to the Organization Management role group.</span></span> <span data-ttu-id="9c043-126">Or you can create a new role group, assign the Mailbox Import Export role, and then add yourself as a member.</span><span class="sxs-lookup"><span data-stu-id="9c043-126">Or you can create a new role group, assign the Mailbox Import Export role, and then add yourself as a member.</span></span> <span data-ttu-id="9c043-127">Per ulteriori informazioni, vedere la sezione "aggiungere un ruolo a un gruppo di ruoli" o "creare un gruppo di ruoli" in [Manage Role](https://go.microsoft.com/fwlink/p/?LinkId=730688)groups.</span><span class="sxs-lookup"><span data-stu-id="9c043-127">For more information, see the "Add a role to a role group" or the "Create a role group" sections in [Manage role groups](https://go.microsoft.com/fwlink/p/?LinkId=730688).</span></span>
    
    <span data-ttu-id="9c043-128">Per creare processi di importazione nel centro sicurezza & Compliance, è inoltre necessario che sia vero uno dei seguenti valori:</span><span class="sxs-lookup"><span data-stu-id="9c043-128">Additionally, to create import jobs in the Security & Compliance Center, one of the following must be true:</span></span>
    
  - <span data-ttu-id="9c043-129">È necessario essere assegnati al ruolo destinatari di posta elettronica in Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="9c043-129">You have to be assigned the Mail Recipients role in Exchange Online.</span></span> <span data-ttu-id="9c043-130">By default, this role is assigned to the Organization Management and Recipient Management roles groups.</span><span class="sxs-lookup"><span data-stu-id="9c043-130">By default, this role is assigned to the Organization Management and Recipient Management roles groups.</span></span>
    
    <span data-ttu-id="9c043-131">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-131">Or</span></span>
    
  - <span data-ttu-id="9c043-132">È necessario essere un amministratore globale dell'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-132">You have to be a global administrator in your Office 365 organization.</span></span>
    
  > [!TIP]
  > <span data-ttu-id="9c043-133">Valutare la possibilità di creare un nuovo gruppo di ruoli in Exchange Online specificamente progettato per l'importazione di file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-133">Consider creating a new role group in Exchange Online that's specifically intended for importing PST files to Office 365.</span></span> <span data-ttu-id="9c043-134">Per il livello minimo di privilegi necessari per importare i file PST, assegnare i ruoli di importazione e esportazione delle cassette postali al nuovo gruppo di ruoli e quindi aggiungere membri.</span><span class="sxs-lookup"><span data-stu-id="9c043-134">For the minimum level of privileges required to import PST files, assign the Mailbox Import Export and Mail Recipients roles to the new role group, and then add members.</span></span> 
  
- <span data-ttu-id="9c043-135">È necessario archiviare i file PST che si desidera importare in Office 365 in un file server o in una cartella condivisa all'interno dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-135">You need to store the PST files that you want to import to Office 365 on a file server or shared folder in your organization.</span></span> <span data-ttu-id="9c043-136">Nel passaggio 5, è possibile eseguire Office 365 ImportTool, che consente di crittografare e caricare i file PST archiviati in questo file server o cartella condivisa in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-136">In Step 5, you'll run the Office 365 ImportTool, which will encrypt and upload the PST files that are stored on this file server or shared folder to Office 365.</span></span>
    
- <span data-ttu-id="9c043-137">Questa procedura prevede la copia e il salvataggio di una copia della chiave di crittografia, una chiave di archiviazione e di una serie di chiavi e URL di identificazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-137">This procedure involves copying and saving a copy of an encryption key, a storage key, and a number of identification keys and URLs.</span></span> <span data-ttu-id="9c043-138">Queste informazioni verranno utilizzate nel passaggio 5 per crittografare e caricare i file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-138">This information will be used in Step 5 to encrypt and upload your PST files.</span></span> <span data-ttu-id="9c043-139">Adottare le dovute precauzioni per proteggere questi file nello stesso in modo in cui vengono protette password o altre informazioni di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="9c043-139">Be sure to take precautions to protect these just like you would protect passwords or other security-related information.</span></span> <span data-ttu-id="9c043-140">Ad esempio, potrebbe essere necessario salvarli in un documento di Microsoft Word protetto da password oppure su un'unità USB crittografata.</span><span class="sxs-lookup"><span data-stu-id="9c043-140">For example you might save them to a password-protected Microsoft Word document or save them to an encrypted USB drive.</span></span> <span data-ttu-id="9c043-141">Vedere la sezione [Ulteriori informazioni](#more-information) per consultare un esempio di queste chiavi, ID e URL.</span><span class="sxs-lookup"><span data-stu-id="9c043-141">See the [More information](#more-information) section for an example of these keys, IDs, and URLs.</span></span> 
    
- <span data-ttu-id="9c043-142">È possibile importare i file PST in una cassetta postale inattiva in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-142">You can import PST files to an inactive mailbox in Office 365.</span></span> <span data-ttu-id="9c043-143">A tale scopo, specificare il GUID della cassetta postale inattiva nel `Mailbox` parametro nel file di mapping di importazione PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-143">You do this by specifying the GUID of the inactive mailbox in the  `Mailbox` parameter in the PST Import mapping file.</span></span> <span data-ttu-id="9c043-144">Per ulteriori informazioni, vedere [passaggio 7](#step-7-create-the-pst-import-mapping-file) .</span><span class="sxs-lookup"><span data-stu-id="9c043-144">See [Step 7](#step-7-create-the-pst-import-mapping-file) for more information.</span></span> 
    
- <span data-ttu-id="9c043-145">In una distribuzione ibrida di Exchange, è possibile importare i file PST in una cassetta postale di archiviazione basata sul cloud per un utente la cui cassetta postale principale è in locale.</span><span class="sxs-lookup"><span data-stu-id="9c043-145">In an Exchange hybrid deployment, you can import PST files to a cloud-based archive mailbox for a user whose primary mailbox is on-premises.</span></span> <span data-ttu-id="9c043-146">A tale scopo, eseguire le operazioni seguenti nel file di mapping di importazione PST:</span><span class="sxs-lookup"><span data-stu-id="9c043-146">You do this by doing the following in the PST Import mapping file:</span></span>
    
  - <span data-ttu-id="9c043-147">Specificare l'indirizzo di posta elettronica per la cassetta postale locale dell'utente nel `Mailbox` parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-147">Specify the email address for the user's on-premises mailbox in the  `Mailbox` parameter.</span></span> 
    
  - <span data-ttu-id="9c043-148">Specificare il valore **true** nel `IsArchive` parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-148">Specify the **TRUE** value in the  `IsArchive` parameter.</span></span> 
    
    <span data-ttu-id="9c043-149">Per ulteriori informazioni, vedere [passaggio 7](#step-7-create-the-pst-import-mapping-file) .</span><span class="sxs-lookup"><span data-stu-id="9c043-149">See [Step 7](#step-7-create-the-pst-import-mapping-file) for more information.</span></span> 
    
- <span data-ttu-id="9c043-150">Dopo aver importato i file PST in una cassetta postale di Office 365, l'impostazione di conservazione per la cassetta postale è attivata per una durata indefinita.</span><span class="sxs-lookup"><span data-stu-id="9c043-150">After PST files are imported to an Office 365 mailbox, the retention hold setting for the mailbox is turned on for an indefinite duration.</span></span> <span data-ttu-id="9c043-151">Questo significa che i criteri di conservazione assegnati alla cassetta postale non verranno elaborati fino a quando non si disattiva il blocco di conservazione o si imposta una data per disattivare il blocco.</span><span class="sxs-lookup"><span data-stu-id="9c043-151">This means that the retention policy assigned to the mailbox won't be processed until you turn off the retention hold or set a date to turn off the hold.</span></span> <span data-ttu-id="9c043-152">Perché eseguire questa operazione?</span><span class="sxs-lookup"><span data-stu-id="9c043-152">Why do we do this?</span></span> <span data-ttu-id="9c043-153">Se i messaggi importati in una cassetta postale sono obsoleti, potrebbero essere eliminati definitivamente (eliminati) perché il periodo di conservazione è scaduto in base alle impostazioni di conservazione configurate per la cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="9c043-153">If messages imported to a mailbox are old, they might be permanently deleted (purged) because their retention period has expired based on the retention settings configured for the mailbox.</span></span> <span data-ttu-id="9c043-154">Se si posiziona la cassetta postale su conservazione, il proprietario della cassetta postale consentirà di gestire i messaggi appena importati o di modificare le impostazioni di conservazione per la cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="9c043-154">Placing the mailbox on retention hold will give the mailbox owner time to manage these newly-imported messages or give you time to change the retention settings for the mailbox.</span></span> <span data-ttu-id="9c043-155">Vedere la sezione [ulteriori informazioni](#more-information) per suggerimenti sulla gestione del blocco di conservazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-155">See the [More information](#more-information) section for suggestions about managing the retention hold.</span></span> 
    
- <span data-ttu-id="9c043-156">Se non è necessario crittografare i file PST prima di caricarli in Office 365, vedere [usare il caricamento di rete per importare i file PST in office 365](use-network-upload-to-import-pst-files.md).</span><span class="sxs-lookup"><span data-stu-id="9c043-156">If you don't need to encrypt your PST files before you upload them to Office 365, see [Use network upload to import PST files to Office 365](use-network-upload-to-import-pst-files.md).</span></span>
    
- <span data-ttu-id="9c043-157">Per le domande frequenti sull'utilizzo del caricamento di rete per importare i file PST in Office 365, vedere [domande frequenti sull'importazione di file PST in office 365](faqimporting-pst-files-to-office-365.md).</span><span class="sxs-lookup"><span data-stu-id="9c043-157">For frequently asked questions about using network upload to import PST files to Office 365, see [FAQ about importing PST files to Office 365](faqimporting-pst-files-to-office-365.md).</span></span>
  
## <a name="step-1-set-up-azure-rights-management-for-pst-import"></a><span data-ttu-id="9c043-158">Passaggio 1: configurare Azure Rights Management per l'importazione PST </span><span class="sxs-lookup"><span data-stu-id="9c043-158">Step 1: Set up Azure Rights Management for PST Import</span></span>

<span data-ttu-id="9c043-159">L'importazione PST utilizza la funzionalità di crittografia fornita dal servizio Azure Rights Management (Azure RMS) in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-159">PST Import uses the encryption functionality provided by the Azure Rights Management (Azure RMS) service in Office 365.</span></span> <span data-ttu-id="9c043-160">Questo consente di crittografare i file PST prima di caricarli in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-160">This lets you to encrypt PST files before uploading them to Office 365.</span></span> 
  
<span data-ttu-id="9c043-161">La configurazione di Azure RMS per l'importazione PST è costituita da tre passaggi:</span><span class="sxs-lookup"><span data-stu-id="9c043-161">Configuring Azure RMS for PST Import consists of three steps:</span></span>
  
- [<span data-ttu-id="9c043-162">Attivazione di Azure RMS</span><span class="sxs-lookup"><span data-stu-id="9c043-162">Activating Azure RMS</span></span>](#activating-azure-rms)
    
- [<span data-ttu-id="9c043-163">Configurazione di RMS in Exchange Online</span><span class="sxs-lookup"><span data-stu-id="9c043-163">Configuring RMS in Exchange Online</span></span>](#configuring-rms-in-exchange-online)
    
- [<span data-ttu-id="9c043-164">Installazione del client Active Directory RMS</span><span class="sxs-lookup"><span data-stu-id="9c043-164">Installing the Active Directory RMS Client</span></span>](#installing-the-active-directory-rms-client)
    
### <a name="activating-azure-rms"></a><span data-ttu-id="9c043-165">Attivazione di Azure RMS</span><span class="sxs-lookup"><span data-stu-id="9c043-165">Activating Azure RMS</span></span>

<span data-ttu-id="9c043-166">Azure RMS è disabilitato per impostazione predefinita, ma l'utente o un altro amministratore dell'organizzazione potrebbe averlo attivato.</span><span class="sxs-lookup"><span data-stu-id="9c043-166">Azure RMS is disabled by default, but you or another administrator in your organization might have activated it.</span></span> <span data-ttu-id="9c043-167">Seguire le istruzioni sull' [attivazione di Azure Rights Management](https://docs.microsoft.com/azure/information-protection/deploy-use/activate-service) per installare e attivare la tecnologia DRM di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-167">Follow instructions on [Activating Azure Rights Management](https://docs.microsoft.com/azure/information-protection/deploy-use/activate-service) to install and activate Azure DRM.</span></span>
  
### <a name="configuring-rms-in-exchange-online"></a><span data-ttu-id="9c043-168">Configurazione di RMS in Exchange Online</span><span class="sxs-lookup"><span data-stu-id="9c043-168">Configuring RMS in Exchange Online</span></span>

<span data-ttu-id="9c043-169">Dopo aver attivato il servizio Rights Management, il passaggio successivo consiste nell'impostare Information Rights Management (IRM) in Exchange Online per l'utilizzo di Azure RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-169">After you've activated the Rights Management service, the next step is to set up Information Rights Management (IRM) in Exchange Online to use Azure RMS.</span></span> <span data-ttu-id="9c043-170">Per ulteriori informazioni, vedere [configurazione di IRM per l'utilizzo di Azure Rights Management](https://go.microsoft.com/fwlink/p/?LinkId=394816).</span><span class="sxs-lookup"><span data-stu-id="9c043-170">For more information, see [Configure IRM to use Azure Rights Management](https://go.microsoft.com/fwlink/p/?LinkId=394816).</span></span>
  
1. <span data-ttu-id="9c043-171">[Connettersi a Exchange Online tramite Remote PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=396554 ).</span><span class="sxs-lookup"><span data-stu-id="9c043-171">[Connect to Exchange Online using Remote PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=396554 ).</span></span>
    
2. <span data-ttu-id="9c043-172">Eseguire il seguente comando per impostare l'URL di condivisione della chiave RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-172">Run the following command to set the RMS key sharing URL.</span></span>
    
    ```
    Set-IRMConfiguration -RMSOnlineKeySharingLocation <RMS key sharing location>
    ```

    <span data-ttu-id="9c043-173">Utilizzare la tabella seguente per determinare il percorso di condivisione della chiave RMS corretta in base alla posizione dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-173">Use the following table to determine the correct RMS key sharing location for the location of your organization.</span></span>
    
    |<span data-ttu-id="9c043-174">**Posizione**</span><span class="sxs-lookup"><span data-stu-id="9c043-174">**Location**</span></span>|<span data-ttu-id="9c043-175">**Percorso di condivisione della chiave di RMS**</span><span class="sxs-lookup"><span data-stu-id="9c043-175">**RMS key sharing location**</span></span>|
    |:-----|:-----|
    |<span data-ttu-id="9c043-176">Nord America</span><span class="sxs-lookup"><span data-stu-id="9c043-176">North America</span></span>  <br/> | `https://sp-rms.na.aadrm.com/TenantManagement/ServicePartner.svc` <br/> |
    |<span data-ttu-id="9c043-177">Unione Europea</span><span class="sxs-lookup"><span data-stu-id="9c043-177">European Union</span></span>  <br/> | `https://sp-rms.eu.aadrm.com/TenantManagement/ServicePartner.svc` <br/> |
    |<span data-ttu-id="9c043-178">Asia</span><span class="sxs-lookup"><span data-stu-id="9c043-178">Asia</span></span>  <br/> | `https://sp-rms.ap.aadrm.com/TenantManagement/ServicePartner.svc` <br/> |
    |<span data-ttu-id="9c043-179">Sud America</span><span class="sxs-lookup"><span data-stu-id="9c043-179">South America</span></span>  <br/> | `https://sp-rms.sa.aadrm.com/TenantManagement/ServicePartner.svc` <br/> |
    |<span data-ttu-id="9c043-180">Office 365 per il governo (Government Community Cloud)</span><span class="sxs-lookup"><span data-stu-id="9c043-180">Office 365 for Government (Government Community Cloud)</span></span>  <br/> | <span data-ttu-id="9c043-181">`https://sp-rms.govus.aadrm.com/TenantManagement/ServicePartner.svc`<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="9c043-181">`https://sp-rms.govus.aadrm.com/TenantManagement/ServicePartner.svc`<sup>1</sup></span></span> <br/> |
   
    > [!NOTE]
    > <span data-ttu-id="9c043-182"><sup>1</sup> solo i clienti che hanno acquistato Office 365 per SKU governative (Government community Cloud) devono utilizzare questo percorso di condivisione della chiave RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-182"><sup>1</sup> Only customers who have purchased Office 365 for Government SKUs (Government Community Cloud) should use this RMS key sharing location.</span></span> 
  
    <span data-ttu-id="9c043-183">Ad esempio, questo comando consente di configurare il percorso di condivisione della chiave di RMS online in Exchange Online per un cliente che si trova in Nord America.</span><span class="sxs-lookup"><span data-stu-id="9c043-183">For example, this command configures the RMS Online key sharing location in Exchange Online for a customer located in North America.</span></span>
    
    ```
    Set-IRMConfiguration -RMSOnlineKeySharingLocation "https://sp-rms.na.aadrm.com/TenantManagement/ServicePartner.svc"
    ```

3. <span data-ttu-id="9c043-184">Eseguire il seguente comando per importare un dominio di pubblicazione trusted (Trusted Publishing Domain) da RMS online all'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-184">Run the following command to import a Trusted Publishing Domain (TPD) from RMS Online to your Office 365 organization.</span></span> 
    
    ```
    Import-RMSTrustedPublishingDomain -RMSOnline -Name "RMS Online"
    ```

    <span data-ttu-id="9c043-185">In un dominio TPD sono contenute le impostazioni necessarie per utilizzare le funzionalità RMS nell'organizzazione, tra cui la crittografia dei file PST. </span><span class="sxs-lookup"><span data-stu-id="9c043-185">A TPD contains the settings needed to use RMS features in your organization, including encrypting PST files.</span></span> 
    
4. <span data-ttu-id="9c043-186">Eseguire il seguente comando per abilitare IRM per l'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-186">Run the following command to enable IRM for your Office 365 organization.</span></span>
    
    ```
    Set-IRMConfiguration -InternalLicensingEnabled $true
    ```

### <a name="installing-the-active-directory-rms-client"></a><span data-ttu-id="9c043-187">Installazione del client Active Directory RMS</span><span class="sxs-lookup"><span data-stu-id="9c043-187">Installing the Active Directory RMS Client</span></span>

<span data-ttu-id="9c043-188">L'ultimo passaggio in questa sezione è il download del client Rights Management Services (RMS) 2.1.</span><span class="sxs-lookup"><span data-stu-id="9c043-188">The last step in this section is to download the Rights Management Services (RMS) Client 2.1.</span></span> <span data-ttu-id="9c043-189">Questo software contribuisce a proteggere l'accesso a Azure RMS e protegge le informazioni che scorrono attraverso applicazioni che utilizzano Azure RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-189">This software helps protect access to Azure RMS and protects information flowing through applications that use Azure RMS.</span></span> <span data-ttu-id="9c043-190">Installare il client RMS nello stesso computer che verrà utilizzato per crittografare e caricare i file PST nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="9c043-190">Install the RMS client on the same computer that you'll use to encrypt and upload PST files in Step 5.</span></span> 
  
1. <span data-ttu-id="9c043-191">Scaricare il [client del servizio Rights Management 2,1](https://www.microsoft.com/en-us/download/details.aspx?id=38396).</span><span class="sxs-lookup"><span data-stu-id="9c043-191">Download [Rights Management Service Client 2.1](https://www.microsoft.com/en-us/download/details.aspx?id=38396).</span></span>
    
2. <span data-ttu-id="9c043-192">Eseguire la procedura guidata del client Rights Management Service 2.1 di Active Directory per installare il client.</span><span class="sxs-lookup"><span data-stu-id="9c043-192">Run the Active Directory Rights Management Service Client 2.1 wizard to install the client.</span></span>

## <a name="step-2-generate-an-encryption-key-for-pst-import"></a><span data-ttu-id="9c043-193">Passaggio 2: generare una chiave di crittografia per l'importazione PST</span><span class="sxs-lookup"><span data-stu-id="9c043-193">Step 2: Generate an encryption key for PST Import</span></span>

<span data-ttu-id="9c043-194">Dopo aver configurato Azure RMS, il passaggio successivo consiste nel generare una chiave di crittografia (denominata chiave simmetrica) che verrà utilizzata per crittografare i file PST caricati in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-194">After you've set up Azure RMS, the next step is to generate an encryption key (called a symmetric key) that will be used to encrypt the PST files that you upload to Office 365.</span></span> <span data-ttu-id="9c043-195">Per eseguire questa operazione, aggiungere il servizio di importazione PST come entità di servizio in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9c043-195">You'll do this by adding the PST Import service as a service principal in Azure Active Directory.</span></span> <span data-ttu-id="9c043-196">L'aggiunta di questa applicazione come entità di servizio consentirà al servizio di importazione PST di eseguire l'autenticazione direttamente con Azure Active Directory quando si caricano i file PST crittografati nel percorso di archiviazione di Azure nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="9c043-196">Adding this application as a service principal will allow the PST Import service to authenticate directly with Azure Active Directory when you upload encrypted the PST files to the Azure storage location in Step 5.</span></span>
  
1. <span data-ttu-id="9c043-197">Avviare il modulo di Azure Active Directory per Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9c043-197">Start the Azure Active Directory Module for Windows PowerShell.</span></span>
    
2. <span data-ttu-id="9c043-198">Eseguire il seguente comando per connettersi al servizio online Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9c043-198">Run the following command to connect to the Microsoft Online service.</span></span>
    
    ```
    Connect-MsolService
    ```

3. <span data-ttu-id="9c043-199">Immettere le credenziali di un account amministratore nell'organizzazione di Office 365 e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="9c043-199">Enter the credentials for an administrator account in your Office 365 organization, and then click **OK**.</span></span>
    
4. <span data-ttu-id="9c043-200">Eseguire il comando seguente per generare una chiave di crittografia (chiamare una chiave simmetrica).</span><span class="sxs-lookup"><span data-stu-id="9c043-200">Run the following command to generate an encryption key (call a symmetric key).</span></span> <span data-ttu-id="9c043-201">Sarà possibile farlo creando una nuova entità di protezione di crittografia PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-201">You'll do this by creating a new PST Encryption Principal.</span></span>
    
    ```
    New-MsolServicePrincipal -DisplayName PstEncryptionPrincipal
    ```

    <span data-ttu-id="9c043-202">Il sistema visualizza la chiave simmetrica e le proprietà della nuova entità di protezione di crittografia PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-202">The system displays the symmetric key and the properties for the new PST Encryption Principal.</span></span>
    
    ![Copiare e salvare la chiave simmetrica che viene visualizzata](media/0003fdea-dace-41d2-b49d-f5c98c6230ca.png)
  
5. <span data-ttu-id="9c043-p117">Copiare la chiave simmetrica in un testo o file di Word. Come descritto in precedenza, prendere le dovute precauzioni per proteggere il file. Poiché si tratta dell'unica volta in cui la chiave simmetrica viene visualizzata, è consigliabile acquisire la schermata della finestra e salvarla nello stesso file. </span><span class="sxs-lookup"><span data-stu-id="9c043-p117">Copy the symmetric key to a text or Word file. As previously stated, be sure to take precautions to protect this file. Because this is the only time that the symmetric key is displayed, you might also consider taking a screenshot of this window and saving it to the same file.</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="9c043-207">Dopo aver creato l'entità di protezione di crittografia PST, non sarà possibile recuperare la chiave simmetrica utilizzando il cmdlet **Get-MsolServicePrincipal**.</span><span class="sxs-lookup"><span data-stu-id="9c043-207">After you create the PST Encryption Principal, you won't be able to retrieve the symmetric key by using the **Get-MsolServicePrincipal** cmdlet.</span></span> <span data-ttu-id="9c043-208">È per questo motivo che è importante salvare la chiave.</span><span class="sxs-lookup"><span data-stu-id="9c043-208">That's why it's important to save the key.</span></span> 
  
<span data-ttu-id="9c043-209">Mantenere il modulo di Azure Active Directory per Windows PowerShell aperto e connesso al servizio Microsoft online.</span><span class="sxs-lookup"><span data-stu-id="9c043-209">Keep the Azure Active Directory Module for Windows PowerShell open and connected to the Microsoft Online service.</span></span> <span data-ttu-id="9c043-210">Si eseguirà un comando in questa finestra nel passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="9c043-210">You'll run a command in this window in the next step.</span></span>

## <a name="step-3-obtain-rms-tenant-id-and-licensing-url"></a><span data-ttu-id="9c043-211">Passaggio 3: ottenere l'ID tenant RMS e l'URL delle licenze</span><span class="sxs-lookup"><span data-stu-id="9c043-211">Step 3: Obtain RMS tenant ID and licensing URL</span></span>

<span data-ttu-id="9c043-212">Il passaggio successivo consiste nell'ottenere l'ID tenant e l'URL della posizione di gestione delle licenze per il servizio Azure RMS per l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-212">The next step is to obtain the tenant ID and licensing location URL for the Azure RMS service for your organization.</span></span> <span data-ttu-id="9c043-213">Copiare e salvare queste informazioni in uno stesso file che contiene la chiave simmetrica del passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="9c043-213">Copy and save this information to the same file that contains the symmetric key from Step 2.</span></span> <span data-ttu-id="9c043-214">L'ID e l'URL verranno utilizzati nel passaggio 5 per crittografare i file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-214">The ID and URL will be used in Step 5 to encrypt your PST files.</span></span>
  
1. <span data-ttu-id="9c043-215">Nel modulo di Azure Active Directory per Windows PowerShell (connesso al servizio Microsoft online), utilizzare il seguente comando per connettersi al servizio Azure RMS nell'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-215">In the Azure Active Directory Module for Windows PowerShell (which is connected to the Microsoft Online service), run the following command to connect to the Azure RMS service in your Office 365 organization.</span></span>
    
    ```
    Connect-AadrmService 
    ```

2. <span data-ttu-id="9c043-216">Immettere le credenziali di un account amministratore nell'organizzazione di Office 365 e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="9c043-216">Enter the credentials for an administrator account in your Office 365 organization and then click **OK**.</span></span>
    
3. <span data-ttu-id="9c043-217">Eseguire il seguente comando per visualizzare l'ID tenant per il servizio Azure RMS nell'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-217">Run the following command to display the tenant ID for the Azure RMS service in your Office 365 organization.</span></span>
    
    ```
    Get-AadrmConfiguration | FL BPOSId
    ```

    <span data-ttu-id="9c043-218">Copiare e salvare il valore per la `BPOSId` proprietà.</span><span class="sxs-lookup"><span data-stu-id="9c043-218">Copy and save the value for the  `BPOSId` property.</span></span> 
    
4. <span data-ttu-id="9c043-219">Eseguire il seguente comando per visualizzare il percorso di licenza per il servizio Azure RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-219">Run the following command to display the licensing location for your Azure RMS service.</span></span>
    
    ```
    Get-AadrmConfiguration | FL LicensingIntranetDistributionPointUrl
    ```

    <span data-ttu-id="9c043-220">Copiare e salvare il valore per la `LicensingIntranetDistributionPointUrl` proprietà.</span><span class="sxs-lookup"><span data-stu-id="9c043-220">Copy and save the value for the  `LicensingIntranetDistributionPointUrl` property.</span></span> 

## <a name="step-4-download-the-pst-import-tools-and-copy-the-sas-url"></a><span data-ttu-id="9c043-221">Passaggio 4: scaricare gli strumenti di importazione PST e copiare l'URL SAS</span><span class="sxs-lookup"><span data-stu-id="9c043-221">Step 4: Download the PST Import tools and copy the SAS URL</span></span>

<span data-ttu-id="9c043-222">Dopo aver configurato Azure RMS e aver ottenuto gli ID necessari per crittografare i file PST, il passaggio successivo consiste nel scaricare e installare gli strumenti che verranno eseguiti nel passaggio 5 per crittografare e caricare i file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-222">Now that you've configured Azure RMS and obtained the IDs necessary to encrypt PST files, the next step is to download and install the tools that you will run in Step 5 to encrypt and upload PST files to Office 365.</span></span> <span data-ttu-id="9c043-223">Questi strumenti sono lo strumento di AzCopy di Azure e lo strumento di crittografia dei dati di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-223">These tools are the Azure AzCopy tool and the Office 365 Data Encryption tool.</span></span> <span data-ttu-id="9c043-224">È inoltre possibile copiare l'URL SAS per la propria organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-224">You'll also copy the SAS URL for your organization.</span></span> <span data-ttu-id="9c043-225">Questo URL è una combinazione dell'URL di rete per la posizione di archiviazione di Azure nel cloud Microsoft per l'organizzazione e una chiave di firma di accesso condiviso (SAS).</span><span class="sxs-lookup"><span data-stu-id="9c043-225">This URL is a combination of the network URL for the Azure storage location in the Microsoft cloud for your organization and a Shared Access Signature (SAS) key.</span></span> <span data-ttu-id="9c043-226">Questa chiave fornisce le autorizzazioni necessarie per caricare i file PST nel percorso di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-226">This key provides you with the necessary permissions to upload PST files to your Azure storage location.</span></span> <span data-ttu-id="9c043-227">Salvarlo nello stesso file in cui sono state copiate le altre informazioni nel passaggio 2 e nel passaggio 3.</span><span class="sxs-lookup"><span data-stu-id="9c043-227">Save it to the same file that you've copied the other information to in Step 2 and Step 3.</span></span> <span data-ttu-id="9c043-228">Come indicato in precedenza, prendere precauzioni per proteggere l'URL SAS.</span><span class="sxs-lookup"><span data-stu-id="9c043-228">As previously stated, take precautions to protect the SAS URL.</span></span> 
  
> [!IMPORTANT]
> <span data-ttu-id="9c043-229">È necessario utilizzare Azure AzCopy versione 5,0 per caricare correttamente i file PST nel percorso di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-229">You have to use Azure AzCopy version 5.0 to successfully upload PST files to the Azure storage location.</span></span> <span data-ttu-id="9c043-230">Le versioni più recenti dello strumento AzCopy non sono supportate per l'importazione di file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-230">Newer versions of the AzCopy tool aren't supported for importing PST files to Office 365.</span></span> <span data-ttu-id="9c043-231">Assicurarsi di scaricare lo strumento AzCopy dalla pagina **Carica file sulla rete** attenendosi alle procedure descritte in questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="9c043-231">Be sure to download the AzCopy tool from the **Upload files over the network** page by following the procedures in this step.</span></span> 
  
1. <span data-ttu-id="9c043-232">Passare a [https://protection.office.com](https://protection.office.com).</span><span class="sxs-lookup"><span data-stu-id="9c043-232">Go to [https://protection.office.com](https://protection.office.com).</span></span>
    
2. <span data-ttu-id="9c043-233">Accedere a Office 365 utilizzando le credenziali di un account amministratore nell'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-233">Sign in to Office 365 using the credentials for an administrator account in your Office 365 organization.</span></span>
    
3. <span data-ttu-id="9c043-234">Nel riquadro sinistro fare clic su **governance dei dati** e quindi fare clic su **Importa**.</span><span class="sxs-lookup"><span data-stu-id="9c043-234">In the left pane, click **Data governance** and then click **Import**.</span></span>
    
4. <span data-ttu-id="9c043-235">Nella pagina **Importa**, fare clic su **Vai al servizio di importazione**.</span><span class="sxs-lookup"><span data-stu-id="9c043-235">On the **Import** page, click **Go to the Import service**.</span></span>
    
5. <span data-ttu-id="9c043-236">Nella pagina **Importa dati in Office 365** fare clic su **nuovo processo** ![Aggiungi icona](media/ITPro-EAC-AddIcon.gif)e quindi fare clic su **carica messaggi di posta elettronica (file PST)**.</span><span class="sxs-lookup"><span data-stu-id="9c043-236">On the **Import data to Office 365** page, click **New job** ![Add Icon](media/ITPro-EAC-AddIcon.gif), and then click **Upload email messages (PST files)**.</span></span>
    
6. <span data-ttu-id="9c043-237">Nel passaggio 2 della pagina **Carica file sulla rete** fare clic su **Mostra URL SAS caricamento di rete**.</span><span class="sxs-lookup"><span data-stu-id="9c043-237">On the **Upload files over the network** page, in step 2, click **Show network upload SAS URL**.</span></span>
    
7. <span data-ttu-id="9c043-238">Dopo aver visualizzato l'URL, copiarlo e salvarlo nel file in cui sono state salvate le altre chiavi.</span><span class="sxs-lookup"><span data-stu-id="9c043-238">After the URL is displayed, copy it and save it in the file where you saved the other keys.</span></span> <span data-ttu-id="9c043-239">Assicurarsi di copiare l'URL completo.</span><span class="sxs-lookup"><span data-stu-id="9c043-239">Be sure to copy the entire URL.</span></span> 
    
8. <span data-ttu-id="9c043-240">Nel passaggio 3, fare clic su **Scarica lo strumento di AzCopy di Azure** per scaricare e installare lo strumento di AzCopy di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-240">In step 3, click **Download the Azure AzCopy tool** to download and install the Azure AzCopy tool.</span></span> 
    
9. <span data-ttu-id="9c043-241">Nella finestra popup, fare clic su **Esegui** per installare lo strumento Azure AzCopy.</span><span class="sxs-lookup"><span data-stu-id="9c043-241">In the pop-up window, click **Run** to install the Azure AzCopy tool.</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="9c043-242">Assicurarsi di installare lo strumento di AzCopy di Azure nel percorso predefinito, che si `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy` trova su un computer che esegue Windows a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="9c043-242">Be sure to install the Azure AzCopy tool in the default location, which is `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy` on a computer running 64-bit Windows.</span></span> <span data-ttu-id="9c043-243">Ciò è dovuto al fatto che, quando si esegue O365ImportTool. exe nel passaggio 5, si cerca lo strumento AzCopy in questa posizione.</span><span class="sxs-lookup"><span data-stu-id="9c043-243">That's because when you run the O365ImportTool.exe in Step 5, it looks for the AzCopy tool in this location.</span></span> 
  
10. <span data-ttu-id="9c043-244">Dopo aver installato lo strumento di Azure AzCopy, fare clic su **Scarica Office 365 Data Encryption and Import Tool**.</span><span class="sxs-lookup"><span data-stu-id="9c043-244">After you've installed the Azure AzCopy tool, click **Download the Office 365 Data Encryption and Import tool**.</span></span>
    
11. <span data-ttu-id="9c043-245">Nella finestra popup, fare clic su **Salva** \> con **nome** per salvare il file O365ImportTool. zip in una cartella del computer locale.</span><span class="sxs-lookup"><span data-stu-id="9c043-245">In the pop-up window, click **Save** \> **Save as** to save the O365ImportTool.zip file to a folder on your local computer.</span></span> 
    
12. <span data-ttu-id="9c043-246">Estrarre il file O365ImportTool.zip.</span><span class="sxs-lookup"><span data-stu-id="9c043-246">Extract the O365ImportTool.zip file.</span></span>
    
13. <span data-ttu-id="9c043-247">Fare clic su **Annulla** per chiudere la pagina **Carica file sulla rete** .</span><span class="sxs-lookup"><span data-stu-id="9c043-247">Click **Cancel** to close the **Upload files over the network** page.</span></span> 
 
## <a name="step-5-encrypt-and-upload-your-pst-files-to-office-365"></a><span data-ttu-id="9c043-248">Passaggio 5: crittografare e caricare i file PST in Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-248">Step 5: Encrypt and upload your PST files to Office 365</span></span>

<span data-ttu-id="9c043-249">Dopo aver completato il passaggio 1 al passaggio 4, è possibile utilizzare lo strumento O365ImportTool. exe per crittografare e caricare i file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-249">After you have completed Step 1 through Step 4, you're ready to use the O365ImportTool.exe tool to encrypt and upload PST files to Office 365.</span></span> <span data-ttu-id="9c043-250">Questo strumento consente di crittografare i file PST e quindi di caricarli e archiviarli in una posizione di archiviazione di Azure nel cloud Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9c043-250">This tool encrypts your PST files and then uploads and stores them in an Azure storage location in the Microsoft cloud.</span></span> <span data-ttu-id="9c043-251">Per completare questo passaggio, è necessario che i file PST siano posizionati in una condivisione file o in un file server dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-251">To complete this step, the PST files have to be located in a file share or file server in your organization.</span></span> <span data-ttu-id="9c043-252">In questa procedura, tale posizione viene definita anche come directory di origine.</span><span class="sxs-lookup"><span data-stu-id="9c043-252">This is known as the source directory in the following procedure.</span></span> <span data-ttu-id="9c043-253">A ogni esecuzione dello strumento O365ImportTool.exe, è possibile specificare una directory di origine differente.</span><span class="sxs-lookup"><span data-stu-id="9c043-253">Each time you run the O365ImportTool.exe tool, you'll can specify a different source directory.</span></span> 
  
1. <span data-ttu-id="9c043-254">Aprire un prompt dei comandi nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="9c043-254">Open a Command Prompt on your local computer.</span></span>
    
2. <span data-ttu-id="9c043-255">Accedere alla directory nella quale è stato installato lo strumento O365ImportTool.exe durante il passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="9c043-255">Go to the directory where you installed the O365ImportTool.exe tool in Step 4.</span></span>
    
3. <span data-ttu-id="9c043-256">Eseguire il seguente comando per crittografare e caricare i file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-256">Run the following command to encrypt and upload PST files to Office 365.</span></span>
    
    ```
    O365ImportTool.exe /srcdir:<Location of PST files> /protect-rmsserver:<RMS licensing location> /protect-tenantid:<BPOSId> /protect-key:<Symmetric key> /transfer:upload /upload-dest:<Network upload URL> /upload-destSAS:<SAS key>
    ```

    <span data-ttu-id="9c043-p126">Nella tabella seguente vengono descritti i parametri e i relativi valori. Tenere presente che le informazioni dei passaggi precedenti vengono utilizzate nei valori di questi parametri.</span><span class="sxs-lookup"><span data-stu-id="9c043-p126">The following table describes the parameters and their required values. Note that the information you obtained in the previous steps is used in the values for these parameters.</span></span>
    
    |<span data-ttu-id="9c043-259">**Parametro**</span><span class="sxs-lookup"><span data-stu-id="9c043-259">**Parameter**</span></span>|<span data-ttu-id="9c043-260">**Descrizione**</span><span class="sxs-lookup"><span data-stu-id="9c043-260">**Description**</span></span>|<span data-ttu-id="9c043-261">**Esempio**</span><span class="sxs-lookup"><span data-stu-id="9c043-261">**Example**</span></span>|
    |:-----|:-----|:-----|
    | `/srcdir:` <br/> |<span data-ttu-id="9c043-262">Specifica la directory di origine nell'organizzazione che contiene i file PST che verranno caricati in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-262">Specifies the source directory in your organization that contains the PST files that will be uploaded to Office 365.</span></span>  <br/> | `/srcdir:\\FILESERVER01\PSTs` <br/> |
    | `/protect-rmsserver:` <br/> |<span data-ttu-id="9c043-263">Specifica il percorso di licenza per il servizio Azure RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-263">Specifies the licensing location for your Azure RMS service.</span></span> <span data-ttu-id="9c043-264">Utilizzare il valore della `LicensingIntranetDistributionPointUrl` proprietà ottenuta nel passaggio 3.</span><span class="sxs-lookup"><span data-stu-id="9c043-264">Use the value of the  `LicensingIntranetDistributionPointUrl` property that you obtained in Step 3.</span></span> <span data-ttu-id="9c043-265">Tenere presente che il valore di questo parametro è racchiuso tra virgolette doppie ("").</span><span class="sxs-lookup"><span data-stu-id="9c043-265">Be sure to surround the value of this parameter with double-quotation marks (" ")</span></span>  <br/> | `/protect-rmsserver:"https://afcbd8ec-cb2b-4a1a-8246-0b4bc22d1978.rms.na.aadrm.com/_wmcs/licensing"` <br/> |
    | `/protect-tenantid:` <br/> |<span data-ttu-id="9c043-266">Specifica l'identità dell'organizzazione di Azure RMS.</span><span class="sxs-lookup"><span data-stu-id="9c043-266">Specifies the identity of your Azure RMS organization.</span></span> <span data-ttu-id="9c043-267">Utilizzare il valore della `BPOSId` proprietà ottenuta nel passaggio 3.</span><span class="sxs-lookup"><span data-stu-id="9c043-267">Use the value of the  `BPOSId` property that you obtained in Step 3.</span></span>  <br/> | `/protect-tenantid:42745b33-2a5c-4726-8a2a-ca43caa0f74b` <br/> |
    | `/protect-key:` <br/> |<span data-ttu-id="9c043-268">Specifica la chiave simmetrica ottenuta nel passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="9c043-268">Specifies the symmetric key that you obtained in Step 2.</span></span> <span data-ttu-id="9c043-269">Racchiudere il valore di questo parametro tra virgolette doppie (" ").</span><span class="sxs-lookup"><span data-stu-id="9c043-269">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/protect-key:"l+R+Umc5RGmSBh1oW+DoyMxm/h5h2JJXFcNOFiNp867="` <br/> |
    | `/transfer:` <br/> |Specifica se si desidera carica i file PST sulla rete o trasferirli su un disco rigido. Il valore `upload` indica che il caricamento dei file viene eseguito tramite la rete. <span data-ttu-id="9c043-272">Il valore `drive` indica che si sta spedendo il PST su un disco rigido.</span><span class="sxs-lookup"><span data-stu-id="9c043-272">The value  `drive` indicates that you are shipping the PSTs on a hard drive.</span></span>  <br/> | `/transfer:upload` <br/> |
    | `/upload-dest:` <br/> |<span data-ttu-id="9c043-273">Specifica la destinazione in Office 365 in cui verrà caricato il file PST; si tratta del percorso di archiviazione di Azure per l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-273">Specifies the destination in Office 365 where your PST files will be uploaded to; this is the Azure storage location for your organization.</span></span> <span data-ttu-id="9c043-274">Il valore di questo parametro è costituito dall'URL di caricamento di rete dall'URL SAS copiato nel passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="9c043-274">The value for this parameter consists of the network upload URL from the SAS URL that you copied in Step 4.</span></span> <span data-ttu-id="9c043-275">Racchiudere il valore di questo parametro tra virgolette doppie (" ").</span><span class="sxs-lookup"><span data-stu-id="9c043-275">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/><br/> <span data-ttu-id="9c043-276">**Suggerimento:** Optional È possibile specificare una sottocartella nel percorso di archiviazione di Azure per caricare i file PST crittografati.</span><span class="sxs-lookup"><span data-stu-id="9c043-276">**Tip:** (Optional) You can specify a subfolder in the Azure storage location to upload the encrypted PST files to.</span></span> <span data-ttu-id="9c043-277">A tale scopo, aggiungere un percorso di sottocartella (dopo "ingestiondata") nell'URL di caricamento della rete.</span><span class="sxs-lookup"><span data-stu-id="9c043-277">You do this by adding a subfolder location (after "ingestiondata") in the network upload URL.</span></span> <span data-ttu-id="9c043-278">Nel primo esempio non viene specificata una sottocartella. Questo significa che il PST verrà caricato nella radice (denominata *ingestiondata* ) del percorso di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-278">The first example doesn't specify a subfolder; that means the PSTs will be uploaded to the root (named  *ingestiondata*  ) of the Azure storage location.</span></span> <span data-ttu-id="9c043-279">Nel secondo esempio vengono caricati i file PST in una sottocartella (denominata *EncryptedPSTs* ) nel percorso di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-279">The second example uploads the PST files to a subfolder (named  *EncryptedPSTs*  ) in the Azure storage location.</span></span>           | `/upload-dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata"` <br/> <span data-ttu-id="9c043-280">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-280">Or</span></span>  <br/>  `/upload-dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/EncryptedPSTs"` <br/> |
    | `/upload-destSAS:` <br/> |<span data-ttu-id="9c043-281">Specifica la chiave SAS per l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-281">Specifies the SAS key for you organization.</span></span> <span data-ttu-id="9c043-282">Il valore di questo parametro è costituito dalla chiave SAS dall'URL SAS copiato nel passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="9c043-282">The value for this parameter consists of the SAS key from the SAS URL that you copied in Step 4.</span></span> <span data-ttu-id="9c043-283">Si noti che il primo carattere della chiave SAS è un punto interrogativo ("?").</span><span class="sxs-lookup"><span data-stu-id="9c043-283">Note that first character in the SAS key is a question mark ("?").</span></span> <span data-ttu-id="9c043-284">Racchiudere il valore di questo parametro tra virgolette doppie (" ").</span><span class="sxs-lookup"><span data-stu-id="9c043-284">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/upload-destSAS:"?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> |
    | `/recurse` <br/> |<span data-ttu-id="9c043-285">Questa opzione opzionale consente di specificare la modalità ricorsiva in modo che lo strumento O365ImportTool. exe copierà i file PST che si trovano in sottocartelle nella directory di origine specificata dal `/srcdir:` parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-285">This optional switch specifies the recursive mode so that the O365ImportTool.exe tool will copy PSTs files that are located in subfolders in the source directory that is specified by the  `/srcdir:` parameter.</span></span>  <br/><br/> <span data-ttu-id="9c043-286">**Nota:** Se si include questo parametro, i file PST nelle sottocartelle avranno un percorso di file diverso nel percorso di archiviazione di Azure dopo che sono stati caricati.</span><span class="sxs-lookup"><span data-stu-id="9c043-286">**Note:** If you include this switch, PST files in subfolders will have a different file pathname in the Azure storage location after they're uploaded.</span></span> <span data-ttu-id="9c043-287">È necessario specificare il percorso esatto nel file CSV creato al passaggio 7.</span><span class="sxs-lookup"><span data-stu-id="9c043-287">You'll have to specify the exact file pathname in the CSV file that you create in Step 7.</span></span>           | `/recurse` <br/> |
   
    <span data-ttu-id="9c043-288">Di seguito è riportato un esempio di sintassi dello strumento O365ImportTool.exe nella quale verranno utilizzati i valori effettivi di ogni parametro:</span><span class="sxs-lookup"><span data-stu-id="9c043-288">Here's an example of the syntax for the O365ImportTool.exe tool using actual values for each parameter:</span></span>
    
    ```
    O365ImportTool.exe /srcdir:\\FILESERVER01\PSTs /protect-rmsserver:"https://afcbd8ec-cb2b-4a1a-8246-0b4bc22d1978.rms.na.aadrm.com/_wmcs/licensing" /protect-tenantid:42745b33-2a5c-4726-8a2a-ca43caa0f74b  /protect-key:"l+R+Umc5RGmSBh1oW+DoyMxm/h5h2JJXFcNOFiNp867=" /transfer:upload /upload-dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata" /upload-destSAS:"?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"
    ```

    <span data-ttu-id="9c043-p135">Una volta eseguito il comando, i messaggi di stato visualizzati riportano informazioni sull'avanzamento della crittografia e del caricamento dei file PST. Nel messaggio finale viene riportato il numero complessivo di file che sono stati crittografati e caricati. </span><span class="sxs-lookup"><span data-stu-id="9c043-p135">After you run the command, status messages are displayed that show the progress of encrypting and uploading the PST files. A final status message shows the total number of files that were successfully encrypted and uploaded.</span></span> 
    
    > [!TIP]
    > <span data-ttu-id="9c043-291">Una volta eseguito il comando O365ImportTool.exe e verificato che tutti i parametri sono corretti, salvare una copia relativa alla sintassi della riga di comando nello stesso file (protetto) nel quale sono state copiate le informazioni ottenute nei passaggi precedenti.</span><span class="sxs-lookup"><span data-stu-id="9c043-291">After you successfully run the O365ImportTool.exe command and verify that all the parameters are correct, save a copy of the command line syntax to the same (secured) file where you copied the information you obtained in the previous steps.</span></span> <span data-ttu-id="9c043-292">È quindi possibile copiare e incollare il comando in un prompt dei comandi ogni volta che si desidera eseguire lo strumento O365ImportTool. exe per crittografare e caricare i file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-292">Then you can copy and paste this command in a Command Prompt each time that you want to run the O365ImportTool.exe tool to encrypt and upload PST files to Office 365.</span></span> <span data-ttu-id="9c043-293">Gli unici valori che potrebbe essere necessario modificare sono quelli per i `/srcdir:` parametri e `/upload-dest:` .</span><span class="sxs-lookup"><span data-stu-id="9c043-293">The only values you might have to change are the ones for the  `/srcdir:` and  `/upload-dest:` parameters.</span></span> 
  
## <a name="optional-step-6-view-a-list-of-the-pst-files-uploaded-to-office-365"></a><span data-ttu-id="9c043-294">Optional Passaggio 6: visualizzazione di un elenco dei file PST caricati in Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-294">(Optional) Step 6: View a list of the PST files uploaded to Office 365</span></span>

<span data-ttu-id="9c043-295">Come passaggio facoltativo, è possibile installare e utilizzare Microsoft Azure Storage Explorer (che è uno strumento gratuito open source) per visualizzare l'elenco dei file PST caricati nel BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-295">As an optional step, you can install and use the Microsoft Azure Storage Explorer (which is a free, open source tool) to view the list of the PST files that you've uploaded to the Azure blob.</span></span> <span data-ttu-id="9c043-296">Per eseguire questa operazione, sono disponibili tre validi motivi:</span><span class="sxs-lookup"><span data-stu-id="9c043-296">There are three good reasons to do this:</span></span>
  
- <span data-ttu-id="9c043-297">Verificare che i file PST dalla cartella condivisa o dal server di file dell'organizzazione siano stati correttamente caricati nel BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-297">Verify that PST files from the shared folder or file server in your organization were successfully uploaded to the Azure blob.</span></span>

- <span data-ttu-id="9c043-298">Verificare che i file PST siano crittografati.</span><span class="sxs-lookup"><span data-stu-id="9c043-298">Verify that the PST files are encrypted.</span></span> <span data-ttu-id="9c043-299">I file PST crittografati `.pfile` hanno un'estensione aggiunta al nome file PST; ad esempio, `pilarp.pst.pfile`.</span><span class="sxs-lookup"><span data-stu-id="9c043-299">Encrypted PST files have a  `.pfile` extension appended to the PST filename; for example,  `pilarp.pst.pfile`.</span></span>
    
- <span data-ttu-id="9c043-300">Verificare il nome del file (e il percorso della sottocartella se ne è stato incluso uno) per ognuno di essi.</span><span class="sxs-lookup"><span data-stu-id="9c043-300">Verify the filename (and the subfolder pathname if you included one) for each PST file uploaded to the Azure blob.</span></span> <span data-ttu-id="9c043-301">Ciò è particolarmente utile quando si crea il file di mapping PST nel passaggio successivo poiché è necessario specificare sia il nome del file sia il percorso della cartella per ogni file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-301">This is really helpful when you're creating the PST mapping file in the next step because you have to specify both the folder pathname and filename for each PST file.</span></span> <span data-ttu-id="9c043-302">La verifica di questi nomi consente di ridurre i potenziali errori nel file di mapping PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-302">Verifying these names can help reduce potential errors in your PST mapping file.</span></span>
    
<span data-ttu-id="9c043-303">Microsoft Azure Storage Explorer è in anteprima.</span><span class="sxs-lookup"><span data-stu-id="9c043-303">The Microsoft Azure Storage Explorer is in Preview.</span></span> 
  
 > [!IMPORTANT]
>  <span data-ttu-id="9c043-304">Non è possibile utilizzare l'esploratore di archiviazione di Azure per caricare o modificare i file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-304">You can't use the Azure Storage Explorer to upload or modify PST files.</span></span> <span data-ttu-id="9c043-305">L'unico metodo supportato per l'importazione di file PST in Office 365 è l'utilizzo di AzCopy.</span><span class="sxs-lookup"><span data-stu-id="9c043-305">The only supported method for importing PST files to Office 365 is to use AzCopy.</span></span> <span data-ttu-id="9c043-306">Inoltre, non è possibile eliminare i file PST caricati nel BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-306">Also, you can't delete PST files that you've uploaded to the Azure blob.</span></span> <span data-ttu-id="9c043-307">Se si tenta di eliminare un file PST, si riceve un errore relativo all'assenza delle autorizzazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="9c043-307">If you try to delete a PST file, you'll receive an error about not having the required permissions.</span></span> <span data-ttu-id="9c043-308">Tenere presente che tutti i file PST vengono eliminati automaticamente dall'area di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-308">Note that all PST files are automatically deleted from your Azure storage area.</span></span> <span data-ttu-id="9c043-309">If there are no import jobs in progress, then all PST files in the **ingestiondata** container are deleted 30 days after the most recent import job was created.</span><span class="sxs-lookup"><span data-stu-id="9c043-309">If there are no import jobs in progress, then all PST files in the **ingestiondata** container are deleted 30 days after the most recent import job was created.</span></span> 
  
<span data-ttu-id="9c043-310">Per installare Azure Storage Explorer e connettersi all'area di archiviazione di Azure:</span><span class="sxs-lookup"><span data-stu-id="9c043-310">To install the Azure Storage Explorer and connect to your Azure storage area:</span></span>
  
1. <span data-ttu-id="9c043-311">Scaricare e installare lo [strumento Microsoft Azure Storage Explorer](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span><span class="sxs-lookup"><span data-stu-id="9c043-311">Download and install the [Microsoft Azure Storage Explorer tool](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span></span>
    
2. <span data-ttu-id="9c043-312">Avviare Microsoft Azure Storage Explorer, fare clic con il pulsante destro del mouse su **account di archiviazione** nel riquadro sinistro, quindi fare clic su **Connetti a spazio di archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="9c043-312">Start the Microsoft Azure Storage Explorer, right-click **Storage Accounts** in the left pane, and then click **Connect to Azure storage**.</span></span> 
    
    ![Fare clic con il pulsante destro del mouse su account di archiviazione e quindi scegliere Connetti a archiviazione](media/75b80cc3-c336-4f96-ad32-54ac9b96a7af.png)
  
3. <span data-ttu-id="9c043-314">Nella casella in **connessione a spazio di archiviazione di Azure**, incollare l'URL SAS ottenuto nel passaggio 4, quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9c043-314">In the box under **Connect to Azure storage**, paste the SAS URL that you obtained in Step 4, and then click **Next**.</span></span> 
    
    ![Incollare l'URL SAS nella casella della pagina di archiviazione per la connessione ad Azure](media/5d034128-e087-48e1-9ebc-4c9fa262d5b7.png)
  
4. <span data-ttu-id="9c043-316">Nella pagina **Riepilogo connessione** è possibile esaminare le informazioni sulla connessione e quindi fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="9c043-316">On the **Connection summary** page, you can review the connection information, and then click **Connect**.</span></span> 
    
5. <span data-ttu-id="9c043-317">In **account di archiviazione**espandere il nodo **(Service SAS)** e quindi espandere il nodo **contenitori BLOB** .</span><span class="sxs-lookup"><span data-stu-id="9c043-317">Under **Storage Accounts**, expand the **(Service SAS)** node, and then expand the **Blob Containers** node.</span></span> 
    
6. <span data-ttu-id="9c043-318">Fare clic con il pulsante destro del mouse su **ingestiondata**, quindi selezionare **Apri editor contenitori BLOB**.</span><span class="sxs-lookup"><span data-stu-id="9c043-318">Right-click **ingestiondata**, and then click **Open Blob Container Editor**.</span></span>
    
    ![Fare clic con il pulsante destro del mouse su ingestiondata, quindi selezionare Apri editor contenitori BLOB](media/f50eee30-9202-4efc-904a-2895a0bc388d.png)
  
    <span data-ttu-id="9c043-320">Viene visualizzata l'area di archiviazione di Azure, con un elenco dei file PST caricati nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="9c043-320">The Azure storage area, with a list of the PST files that you uploaded in Step 5 is displayed.</span></span>
    
    ![Esplora archivi di Azure mostra un elenco di file con estensione PST caricati](media/a448ae43-e744-4153-8304-22b59e93883c.png)
  
7. <span data-ttu-id="9c043-322">Al termine dell'utilizzo di Microsoft Azure Storage Explorer, fare clic con il pulsante destro del mouse su \*\*\*\* **ingestiondata**e quindi scegliere Disconnetti per disconnettersi dall'area di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="9c043-322">When you're finished using the Microsoft Azure Storage Explorer, right-click **ingestiondata**, and then click **Detach** to disconnect from your Azure storage area.</span></span> <span data-ttu-id="9c043-323">In caso contrario, verrà visualizzato un errore al successivo tentativo di associazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-323">Otherwise, you'll receive an error the next time you try to attach.</span></span> 
    
    ![Fare clic con il pulsante destro del mouse sull’inserimento e su Disconnetti per disconnettersi dall'area di archiviazione Azure](media/1e8e5e95-4215-4ce4-a13d-ab5f826a0510.png)
  
## <a name="step-7-create-the-pst-import-mapping-file"></a><span data-ttu-id="9c043-325">Passaggio 7: creare il file di mapping di importazione PST</span><span class="sxs-lookup"><span data-stu-id="9c043-325">Step 7: Create the PST Import mapping file</span></span>

<span data-ttu-id="9c043-326">Dopo che i file PST sono stati crittografati e caricati nel percorso di archiviazione di Azure per l'organizzazione di Office 365, il passaggio successivo consiste nel creare un file con valori delimitati da virgole (CSV) che specifichi le cassette postali degli utenti a cui verranno importati i file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-326">After the PST files have been encrypted and uploaded to the Azure storage location for your Office 365 organization, the next step is to create a comma separated value (CSV) file that specifies which user mailboxes the PST files will be imported to.</span></span> <span data-ttu-id="9c043-327">È necessario inviare il file CSV nel passaggio successivo a quello di creazione del processo di importazione PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-327">You will submit this CSV file in the next step when you create a PST Import job.</span></span>
  
1. <span data-ttu-id="9c043-328">[Scaricare una copia del file di mapping di importazione PST](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span><span class="sxs-lookup"><span data-stu-id="9c043-328">[Download a copy of the PST Import mapping file](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span></span> 
    
2. <span data-ttu-id="9c043-p143">Aprire o salvare il file CSV nel computer locale. Nell'esempio seguente viene visualizzato un file di mapping di importazione PST completo (aperto nel Blocco note). È molto più facile usare Microsoft Excel per modificare il file CSV.</span><span class="sxs-lookup"><span data-stu-id="9c043-p143">Open or save the CSV file to your local computer. The following example shows a completed PST Import mapping file (opened in NotePad). It's much easier to use Microsoft Excel to edit the CSV file.</span></span>
    
    ```
    Workload,FilePath,Name,Mailbox,IsArchive,TargetRootFolder,ContentCodePage,SPFileContainer,SPManifestContainer,SPSiteUrl
    Exchange,,annb.pst.pfile,annb@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,annb_archive.pst.pfile,annb@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,,donh.pst.pfile,donh@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,donh_archive.pst.pfile,donh@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,EncryptedPSTs,pilarp.pst.pfile,pilarp@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,EncryptedPSTs,pilarp_archive.pst.pfile,pilarp@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,EncryptedPSTs,tonyk.pst.pfile,tonyk@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,EncryptedPSTs,tonyk_archive.pst.pfile,tonyk@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,EncryptedPSTs,zrinkam.pst.pfile,zrinkam@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,EncryptedPSTs,zrinkam_archive.pst.pfile,zrinkam@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    ```

    <span data-ttu-id="9c043-332">Nella prima riga o in quella dell'intestazione del file CSV vengono elencati i parametri che verranno usati dal servizio di importazione PST per importare i file PST nelle cassette postali dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-332">The first row, or header row, of the CSV file lists the parameters that will be used by the PST Import service to import the PST files to user mailboxes.</span></span> <span data-ttu-id="9c043-333">Ogni nome di parametro è separato da una virgola.</span><span class="sxs-lookup"><span data-stu-id="9c043-333">Each parameter name is separated by a comma.</span></span> <span data-ttu-id="9c043-334">Ogni riga al di sotto di quella dell'intestazione riporta i valori del parametro che consentono di importare un file PST in una cassetta postale specifica.</span><span class="sxs-lookup"><span data-stu-id="9c043-334">Each row under the header row represents the parameter values for importing a PST file to a specific mailbox.</span></span> <span data-ttu-id="9c043-335">È necessaria una riga per ogni file PST da importare nella cassetta postale di un utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-335">You will need a row for each PST file that you want to import to a user mailbox.</span></span> <span data-ttu-id="9c043-336">Assicurarsi di sostituire i dati segnaposto nel file di mapping con i dati effettivi.</span><span class="sxs-lookup"><span data-stu-id="9c043-336">Be sure to replace the placeholder data in the mapping file with your actual data.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="9c043-337">Non apportare modifiche nella riga di intestazione, compresi i parametri SharePoint. Questi verranno ignorati durante il processo di impostazione PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-337">Don't change anything in the header row, including the SharePoint parameters; they will be ignored during the PST Import process.</span></span> 
  
3. <span data-ttu-id="9c043-338">Utilizzare le informazioni della tabella per popolare il file CSV con i dati necessari.</span><span class="sxs-lookup"><span data-stu-id="9c043-338">Use the information in the following table to populate the CSV file with the required information.</span></span>
    
    |<span data-ttu-id="9c043-339">**Parametro**</span><span class="sxs-lookup"><span data-stu-id="9c043-339">**Parameter**</span></span>|<span data-ttu-id="9c043-340">**Descrizione**</span><span class="sxs-lookup"><span data-stu-id="9c043-340">**Description**</span></span>|<span data-ttu-id="9c043-341">**Esempio**</span><span class="sxs-lookup"><span data-stu-id="9c043-341">**Example**</span></span>|
    |:-----|:-----|:-----|
    | `Workload` <br/> |<span data-ttu-id="9c043-342">Specifica il servizio Office 365 in cui verranno importati i dati.</span><span class="sxs-lookup"><span data-stu-id="9c043-342">Specifies the Office 365 service that data will be imported to.</span></span> <span data-ttu-id="9c043-343">Per importare i file PST nelle cassette postali `Exchange`degli utenti, utilizzare.</span><span class="sxs-lookup"><span data-stu-id="9c043-343">To import PST files to user mailboxes, use  `Exchange`.</span></span>  <br/> | `Exchange` <br/> |
    | `FilePath` <br/> |<span data-ttu-id="9c043-344">Specifica il percorso della cartella nel percorso di archiviazione di Azure in cui sono stati caricati i file PST nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="9c043-344">Specifies the folder location in the Azure storage location that you uploaded the PST files to in Step 5.</span></span>  <br/>  <span data-ttu-id="9c043-345">Se non è stato incluso un nome di sottocartella facoltativo nell'URL di rete `/upload-dest:` nel parametro del passaggio 5, lasciare vuoto questo parametro nel file CSV.</span><span class="sxs-lookup"><span data-stu-id="9c043-345">If you didn't include an optional subfolder name in the network URL in the  `/upload-dest:` parameter in Step 5, leave this parameter blank in the CSV file.</span></span> <span data-ttu-id="9c043-346">Se è stato incluso un nome di sottocartella, specificarlo in questo parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-346">If you included a subfolder name, specify it in this parameter.</span></span> <span data-ttu-id="9c043-347">Il valore di questo parametro è distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="9c043-347">The value for this parameter is case sensitive.</span></span> <span data-ttu-id="9c043-348">In entrambi i casi, *non* includere "ingestiondata" nel valore del `FilePath` parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-348">Either way,  *don't*  include "ingestiondata" in the value for the  `FilePath` parameter.</span></span>  <br/> <br/><span data-ttu-id="9c043-349">**Importante:** Il caso del nome del percorso del file deve essere lo stesso che è stato utilizzato se è stato incluso un nome di sottocartella facoltativo nell'URL SAS `/upload-dest:` nel parametro del passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="9c043-349">**Important:** The case for the file path name must be the same case that you used if you included an optional subfolder name in the SAS URL in the  `/upload-dest:` parameter in Step 5.</span></span> <span data-ttu-id="9c043-350">Ad esempio, se si utilizza `EncryptedPSTs` il nome della sottocartella nel passaggio 5 e quindi si `encryptedpsts` utilizza il `FilePath` parametro nel file CSV, l'importazione del file PST avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="9c043-350">For example, if you used  `EncryptedPSTs` for the subfolder name in Step 5 and then use  `encryptedpsts` in the  `FilePath` parameter in CSV file, the import for the PST file will fail.</span></span> <span data-ttu-id="9c043-351">Assicurarsi di utilizzare lo stesso caso in entrambe le istanze.</span><span class="sxs-lookup"><span data-stu-id="9c043-351">Be sure to use the same case in both instances.</span></span>           |<span data-ttu-id="9c043-352">(lasciare vuoto)</span><span class="sxs-lookup"><span data-stu-id="9c043-352">(leave blank)</span></span>  <br/> <span data-ttu-id="9c043-353">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-353">Or</span></span>  <br/>  `EncryptedPSTs` <br/> |
    | `Name` <br/> |<span data-ttu-id="9c043-354">Specifica il nome del file PST che verrà importato nella cassetta postale. </span><span class="sxs-lookup"><span data-stu-id="9c043-354">Specifies the name of the PST file that will be imported to the user mailbox.</span></span> <span data-ttu-id="9c043-355">Il valore di questo parametro è distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="9c043-355">The value for this parameter is case sensitive.</span></span> <span data-ttu-id="9c043-356">Poiché i file PST caricati nel percorso di archiviazione di Azure sono crittografati, viene `.pfile` aggiunta un'estensione al nome file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-356">Because the PST files that are uploaded to the Azure storage location are encrypted, a  `.pfile` extension is added to the PST filename.</span></span> <span data-ttu-id="9c043-357">È necessario aggiungere l' `.pfile` estensione al nome dei file pst nel file CSV.</span><span class="sxs-lookup"><span data-stu-id="9c043-357">You must add the  `.pfile` extension to the name of the PST files in the CSV file.</span></span>  <br/><br/> <span data-ttu-id="9c043-358">**Importante:** Il caso del nome del file PST nel file CSV deve corrispondere al file PST caricato nel percorso di archiviazione di Azure nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="9c043-358">**Important:** The case for the PST file name in the CSV file must be the same as the PST file that was uploaded to the Azure storage location in Step 5.</span></span> <span data-ttu-id="9c043-359">Ad esempio, se si utilizza `annb.pst.pfile` il `Name` parametro nel file CSV, ma il nome del file pst effettivo è `AnnB.pst`, l'importazione per il file PST avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="9c043-359">For example, if you use  `annb.pst.pfile` in the  `Name` parameter in the CSV file, but the name of the actual PST file is  `AnnB.pst`, the import for that PST file will fail.</span></span> <span data-ttu-id="9c043-360">Assicurarsi che il nome del file PST nel documento CSV utilizzi lo stesso caso del file PST effettivo.</span><span class="sxs-lookup"><span data-stu-id="9c043-360">Be sure that the name of the PST in the CSV file uses the same case as the actual PST file.</span></span>           | `annb.pst.pfile` <br/> |
    | `Mailbox` <br/> |<span data-ttu-id="9c043-361">Specifica l'indirizzo di posta elettronica della cassetta postale nella quale verrà importato il file PST. </span><span class="sxs-lookup"><span data-stu-id="9c043-361">Specifies the email address of the mailbox that the PST file will be imported to.</span></span>  <br/> <span data-ttu-id="9c043-362">Per importare un file PST in una cassetta postale inattiva, è necessario specificare il GUID della cassetta postale per questo parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-362">To import a PST file to an inactive mailbox, you have to specify the mailbox GUID for this parameter.</span></span> <span data-ttu-id="9c043-363">Per ottenere questo GUID, eseguire il seguente comando di PowerShell in Exchange Online:`Get-Mailbox -InactiveMailboxOnly <identity of inactive mailbox> | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="9c043-363">To obtain this GUID, run the following PowerShell command in Exchange Online:  `Get-Mailbox -InactiveMailboxOnly <identity of inactive mailbox> | FL Guid`</span></span> <br/><br/> <span data-ttu-id="9c043-364">**Nota:** In alcuni casi, è possibile disporre di più cassette postali con lo stesso indirizzo di posta elettronica, in cui una cassetta postale è una cassetta postale attiva e l'altra è in uno stato di eliminazione temporanea (o inattivo).</span><span class="sxs-lookup"><span data-stu-id="9c043-364">**Note:** In some cases, you might have multiple mailboxes with the same email address, where one mailbox is an active mailbox and the other mailbox is in a soft-deleted (or inactive) state.</span></span> <span data-ttu-id="9c043-365">In questi casi, è necessario specificare il GUID della cassetta postale per identificare in modo univoco la cassetta postale in cui importare il file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-365">In these situations, you have specify the mailbox GUID to uniquely identify the mailbox to import the PST file to.</span></span> <span data-ttu-id="9c043-366">Per ottenere questo GUID per le cassette postali attive, eseguire il seguente `Get-Mailbox - <identity of active mailbox> | FL Guid`comando di PowerShell:.</span><span class="sxs-lookup"><span data-stu-id="9c043-366">To obtain this GUID for active mailboxes, run the following PowerShell command:  `Get-Mailbox - <identity of active mailbox> | FL Guid`.</span></span> <span data-ttu-id="9c043-367">Per ottenere il GUID per le cassette postali eliminate temporaneamente (o inattive), eseguire il comando seguente.`Get-Mailbox - <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="9c043-367">To obtain the GUID for soft-deleted (or inactive) mailboxes, run this command  `Get-Mailbox - <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`</span></span>           | `annb@contoso.onmicrosoft.com` <br/> <span data-ttu-id="9c043-368">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-368">Or</span></span>  <br/>  `2d7a87fe-d6a2-40cc-8aff-1ebea80d4ae7` <br/> |
    | `IsArchive` <br/> | <span data-ttu-id="9c043-369">Specifica se importare o meno il file PST nella cassetta postale di archiviazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-369">Specifies whether or not to import the PST file to the user's archive mailbox.</span></span> <span data-ttu-id="9c043-370">Esistono due opzioni:</span><span class="sxs-lookup"><span data-stu-id="9c043-370">There are two options:</span></span>  <br/> <span data-ttu-id="9c043-371">Valore **false** Importa il file PST nella cassetta postale principale dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-371">**FALSE** Imports the PST file to the user's primary mailbox.</span></span>  <br/> <span data-ttu-id="9c043-372">**Vero** Importa il file PST nella cassetta postale di archiviazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-372">**TRUE** Imports the PST file to the user's archive mailbox.</span></span>  <br/>  <span data-ttu-id="9c043-373">If you leave this parameter blank, the PST file is imported to the user's primary mailbox.</span><span class="sxs-lookup"><span data-stu-id="9c043-373">If you leave this parameter blank, the PST file is imported to the user's primary mailbox.</span></span>  <br/><br/> <span data-ttu-id="9c043-374">**Nota:** Per importare un file PST in una cassetta postale di archiviazione basata sul cloud per un utente la cui cassetta postale principale è in locale, è sufficiente specificare **true** per questo parametro e specificare l'indirizzo di posta elettronica per la cassetta postale `Mailbox` locale dell'utente per il parametro.</span><span class="sxs-lookup"><span data-stu-id="9c043-374">**Note:** To import a PST file to a cloud-based archive mailbox for a user whose primary mailbox is on-premises, just specify **TRUE** for this parameter and specify the email address for the user's on-premises mailbox for the  `Mailbox` parameter.</span></span>           | `FALSE` <br/> <span data-ttu-id="9c043-375">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-375">Or</span></span>  <br/>  `TRUE` <br/> |
    | `TargetRootFolder` <br/> | <span data-ttu-id="9c043-376">Specifica la cartella delle cassette postali a cui è stato importato il file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-376">Specifies the mailbox folder that the PST file is imported to.</span></span>  <br/>  <span data-ttu-id="9c043-377">Se si omette questo parametro, il file PST verrà importato in una nuova cartella \*\*\*\* denominata importata che si trova a livello di radice della cassetta postale (allo stesso livello della cartella posta in arrivo e delle altre cartelle di cassette postali predefinite).</span><span class="sxs-lookup"><span data-stu-id="9c043-377">If you leave this parameter blank, the PST will be imported to a new folder named **Imported** located at the root level of the mailbox (the same level as the Inbox folder and the other default mailbox folders).</span></span>  <br/>  <span data-ttu-id="9c043-378">Se si specifica `/`, gli elementi del file pst verranno importati direttamente nella cartella posta in arrivo dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-378">If you specify  `/`, items in the PST file will be imported directly in to the user's Inbox folder.</span></span>  <br/>  <span data-ttu-id="9c043-379">Se si specifica `/<foldername>`, gli elementi del file pst verranno importati in una sottocartella denominata \* \<\> FolderName\* .</span><span class="sxs-lookup"><span data-stu-id="9c043-379">If you specify  `/<foldername>`, items in the PST file will be imported to a subfolder named  *\<foldername\>*  .</span></span> <span data-ttu-id="9c043-380">Ad esempio, se è stato `/ImportedPst`utilizzato, gli elementi verrebbero importati in una sottocartella denominata **ImportedPst**.</span><span class="sxs-lookup"><span data-stu-id="9c043-380">For example, if you used  `/ImportedPst`, items would be imported to a subfolder named **ImportedPst**.</span></span> <span data-ttu-id="9c043-381">Questa sottocartella sarà disponibile nella cartella posta in arrivo dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-381">This subfolder will be located in the user's Inbox folder.</span></span>  <br/><br/> <span data-ttu-id="9c043-382">**Suggerimento:** Valutare l'esecuzione di alcuni batch di test per sperimentare questo parametro in modo da poter determinare il percorso della cartella migliore in cui importare i file di PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-382">**Tip:** Consider running a few test batches to experiment with this parameter so you can determine the best folder location to import PSTs files to.</span></span>           |<span data-ttu-id="9c043-383">(lasciare vuoto)</span><span class="sxs-lookup"><span data-stu-id="9c043-383">(leave blank)</span></span>  <br/> <span data-ttu-id="9c043-384">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-384">Or</span></span>  <br/>  `/` <br/> <span data-ttu-id="9c043-385">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-385">Or</span></span>  <br/>  `/ImportedPst` <br/> |
    | `ContentCodePage` <br/> |<span data-ttu-id="9c043-386">Questo parametro facoltativo consente di specificare un valore numerico per la tabella codici da utilizzare per l'importazione dei file PST nel formato di file ANSI.</span><span class="sxs-lookup"><span data-stu-id="9c043-386">This optional parameter specifies a numeric value for the code page to use for importing PST files in the ANSI file format.</span></span> <span data-ttu-id="9c043-387">Questo parametro viene utilizzato per l'importazione di file PST dalle organizzazioni cinesi, giapponesi e coreane (CJK), in quanto generalmente utilizzano un set di caratteri a doppio byte (DBCS) per la codifica dei caratteri.</span><span class="sxs-lookup"><span data-stu-id="9c043-387">This parameter is used for importing PST files from Chinese, Japanese, and Korean (CJK) organizations because these languages typically use a double byte character set (DBCS) for character encoding.</span></span> <span data-ttu-id="9c043-388">Se questo parametro non viene utilizzato per importare i file PST per le lingue che utilizzano i caratteri DBCS per i nomi delle cartelle delle cassette postali, i nomi delle cartelle vengono spesso alterati dopo l'importazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-388">If this parameter isn't used to import PST files for languages that use DBCS for mailbox folder names, the folder names are often garbled after they're imported.</span></span> <span data-ttu-id="9c043-389">Per un elenco dei valori supportati da utilizzare per questo parametro, vedere [Code Page Identifiers](https://go.microsoft.com/fwlink/p/?LinkId=328514).</span><span class="sxs-lookup"><span data-stu-id="9c043-389">For a list of supported values to use for this parameter, see [Code Page Identifiers](https://go.microsoft.com/fwlink/p/?LinkId=328514).</span></span>  <br/><br/> <span data-ttu-id="9c043-390">**Nota:** Come indicato in precedenza, si tratta di un parametro facoltativo e non è necessario includerlo nel file CSV.</span><span class="sxs-lookup"><span data-stu-id="9c043-390">**Note:** As previously stated, this is an optional parameter and you don't have to include it in the CSV file.</span></span> <span data-ttu-id="9c043-391">In alternativa, è possibile includerla e lasciare il valore vuoto per una o più righe.</span><span class="sxs-lookup"><span data-stu-id="9c043-391">Or you can include it and leave the value blank for one or more rows.</span></span>           |<span data-ttu-id="9c043-392">(lasciare vuoto)</span><span class="sxs-lookup"><span data-stu-id="9c043-392">(leave blank)</span></span>  <br/> <span data-ttu-id="9c043-393">Oppure</span><span class="sxs-lookup"><span data-stu-id="9c043-393">Or</span></span>  <br/>  <span data-ttu-id="9c043-394">`932`(ovvero l'identificatore di tabella codici per ANSI/OEM giapponese)</span><span class="sxs-lookup"><span data-stu-id="9c043-394">`932` (which is the code page identifier for ANSI/OEM Japanese)</span></span>  <br/> |
    | `SPFileContainer` <br/> |<span data-ttu-id="9c043-395">Per l'importazione PST, omettere questo parametro. </span><span class="sxs-lookup"><span data-stu-id="9c043-395">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="9c043-396">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="9c043-396">Not applicable</span></span>  <br/> |
    | `SPManifestContainer` <br/> |<span data-ttu-id="9c043-397">Per l'importazione PST, omettere questo parametro. </span><span class="sxs-lookup"><span data-stu-id="9c043-397">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="9c043-398">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="9c043-398">Not applicable</span></span>  <br/> |
    | `SPSiteUrl` <br/> |<span data-ttu-id="9c043-399">Per l'importazione PST, omettere questo parametro. </span><span class="sxs-lookup"><span data-stu-id="9c043-399">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="9c043-400">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="9c043-400">Not applicable</span></span>  <br/> |
  
## <a name="step-8-create-a-pst-import-job-in-office-365"></a><span data-ttu-id="9c043-401">Passaggio 8: creare un processo di Importazione PST in Office 365</span><span class="sxs-lookup"><span data-stu-id="9c043-401">Step 8: Create a PST Import job in Office 365</span></span>

<span data-ttu-id="9c043-402">L'ultimo passaggio consiste nel creare il processo di importazione PST nel servizio di importazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-402">The last step is to create the PST Import job in the Import service in Office 365.</span></span> <span data-ttu-id="9c043-403">Come descritto in precedenza, verrà inviato il file di mapping di importazione PST creato al passaggio 7.</span><span class="sxs-lookup"><span data-stu-id="9c043-403">As previously explained, you will submit the PST Import mapping file that you created in Step 7.</span></span> <span data-ttu-id="9c043-404">Dopo aver creato il nuovo processo, il servizio di importazione utilizzerà le informazioni contenute nel file di mapping per annullare la crittografia e importare i file PST (caricati in Office 365 nel passaggio 5) nella cassetta postale utente specificata.</span><span class="sxs-lookup"><span data-stu-id="9c043-404">After you create the new job, the Import service will use the information in the mapping file to un-encrypt and import the PST files (that you uploaded to Office 365 in Step 5) to the specified user mailbox.</span></span> 
  
1. <span data-ttu-id="9c043-405">Passare a [https://protection.office.com](https://protection.office.com).</span><span class="sxs-lookup"><span data-stu-id="9c043-405">Go to [https://protection.office.com](https://protection.office.com).</span></span>
    
2. <span data-ttu-id="9c043-406">Accedere a Office 365 utilizzando le credenziali di un account amministratore nell'organizzazione di Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-406">Sign in to Office 365 using the credentials for an administrator account in your Office 365 organization.</span></span>
    
3. <span data-ttu-id="9c043-407">Nel riquadro sinistro fare clic su **governance dei dati** e quindi fare clic su **Importa**.</span><span class="sxs-lookup"><span data-stu-id="9c043-407">In the left pane, click **Data governance** and then click **Import**.</span></span>
    
4. <span data-ttu-id="9c043-408">Nella pagina **Importa**, fare clic su **Vai al servizio di importazione**.</span><span class="sxs-lookup"><span data-stu-id="9c043-408">On the **Import** page, click **Go to the Import service**.</span></span>
    
5. <span data-ttu-id="9c043-409">Nella pagina **Importa dati in Office 365** fare clic su **nuovo processo**![Aggiungi icona](media/ITPro-EAC-AddIcon.gif)e quindi fare clic su **carica messaggi di posta elettronica (file PST)**.</span><span class="sxs-lookup"><span data-stu-id="9c043-409">On the **Import data to Office 365** page, click **New job**![Add Icon](media/ITPro-EAC-AddIcon.gif), and then click **Upload email messages (PST files)**.</span></span>
    
6. <span data-ttu-id="9c043-410">Nella pagina **Carica file sulla rete**, fare clic sulle caselle di controllo **Ho effettuato il caricamento dei file** e **Ho accesso al file di mapping**, quindi selezionare **Avanti**. </span><span class="sxs-lookup"><span data-stu-id="9c043-410">On the **Upload files over the network** page, click the **I'm done uploading my files** and **I have access to the mapping file** check boxes, and then click **Next**.</span></span> 
    
7. <span data-ttu-id="9c043-411">Immettere un nome per il processo di importazione PST e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9c043-411">Type a name for the PST Import job, and then click **Next**.</span></span>
    
8. <span data-ttu-id="9c043-412">Fare \*\*\*\* ![clic su Aggiungi](media/ITPro-EAC-AddIcon.gif) icona per selezionare il file di mapping PST creato al passaggio 7.</span><span class="sxs-lookup"><span data-stu-id="9c043-412">Click **Add** ![Add Icon](media/ITPro-EAC-AddIcon.gif) to select the PST Mapping file that you created in Step 7.</span></span> 
    
9. <span data-ttu-id="9c043-413">Una volta visualizzato il nome del file CSV nell'elenco, selezionarlo e fare clic su **Convalida** per verificare se nel file CSV sono presenti errori. </span><span class="sxs-lookup"><span data-stu-id="9c043-413">After the name of the CSV file appears in the list, select it and then click **Validate** to check your CSV file for errors.</span></span> 
    
    > [!NOTE]
    > <span data-ttu-id="9c043-414">Come spiegato in precedenza, quando i file PST sono crittografati `.pfile` , viene aggiunta un'estensione al nome file PST.</span><span class="sxs-lookup"><span data-stu-id="9c043-414">As previous explained, when the PST files are encrypted, a  `.pfile` extension is appended to the PST filename.</span></span> <span data-ttu-id="9c043-415">È necessario aggiungere l' `.pfile` estensione al nome dei file pst nel file CSV.</span><span class="sxs-lookup"><span data-stu-id="9c043-415">You must add the  `.pfile` extension to the name of the PST files in the CSV file.</span></span> <span data-ttu-id="9c043-416">In caso contrario, la convalida del file CSV avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="9c043-416">If you don't, the validation of the CSV file will fail.</span></span> 
  
    <span data-ttu-id="9c043-p158">Il file CSV deve essere convalidato per creare un processo di importazione PST. Se la convalida ha esito negativo, fare clic sul collegamento **Non valido** nella colonna **Stato**. Viene aperta una copia del file di mapping di importazione PST e viene visualizzato un messaggio di errore per ogni riga del file con errore.</span><span class="sxs-lookup"><span data-stu-id="9c043-p158">The CSV file has to be successfully validated to create a PST Import job. If the validation fails, click the **Invalid** link in the **Status** column. A copy of your PST Import mapping file is opened, with a error message for each row in the file that failed.</span></span> 
    
10. <span data-ttu-id="9c043-420">Quando il file di mapping PST viene convalidato, leggere i termini e le condizioni, quindi fare clic sulla casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="9c043-420">When the PST mapping file is successfully validated, read the terms and conditions document, and then click the checkbox.</span></span>
    
11. <span data-ttu-id="9c043-421">Fare clic su **Fine** per inviare il processo.</span><span class="sxs-lookup"><span data-stu-id="9c043-421">Click **Finish** to submit the job.</span></span> 
    
    <span data-ttu-id="9c043-422">Il processo viene visualizzato nell'elenco dei processi di importazione PST nella pagina **Importa dati in Office 365** .</span><span class="sxs-lookup"><span data-stu-id="9c043-422">The job is displayed in the list of PST Import jobs on the **Import data to Office 365** page.</span></span> 
    
12. <span data-ttu-id="9c043-423">Selezionare il processo e fare \*\*\*\*![clic su Aggiorna](media/O365-MDM-Policy-RefreshIcon.gif) l'icona Aggiorna per aggiornare le informazioni sullo stato visualizzate nel riquadro dei dettagli.</span><span class="sxs-lookup"><span data-stu-id="9c043-423">Select the job and click **Refresh**![Refresh icon](media/O365-MDM-Policy-RefreshIcon.gif) to update the status information that's displayed in the details pane.</span></span> 
    
13. <span data-ttu-id="9c043-424">In quest'ultimo, fare clic su **Visualizza dettagli** per visualizzare lo stato più recente del processo selezionato.</span><span class="sxs-lookup"><span data-stu-id="9c043-424">In the details pane, click **View details** to get the latest status for the selected job.</span></span> 
 
## <a name="more-information"></a><span data-ttu-id="9c043-425">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="9c043-425">More information</span></span>

- <span data-ttu-id="9c043-426">Perché importare i file PST in Office 365?</span><span class="sxs-lookup"><span data-stu-id="9c043-426">Why import PST files to Office 365?</span></span>
    
  - <span data-ttu-id="9c043-427">È un ottimo modo per eseguire la migrazione della posta elettronica dell'organizzazione a Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-427">It's a good way to migrate your organization's email to Office 365.</span></span>
    
  - <span data-ttu-id="9c043-428">In questo modo, è possibile soddisfare le esigenze di conformità dell'organizzazione, permettendo all'utente di:</span><span class="sxs-lookup"><span data-stu-id="9c043-428">It helps address compliance needs of your organization by letting you:</span></span>
    
  - <span data-ttu-id="9c043-429">Abilitare le cassette postali di archiviazione per fornire agli altri utenti ulteriore spazio di archiviazione per la cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="9c043-429">Enable archive mailboxes to give users additional mailbox storage space.</span></span>
    
  - <span data-ttu-id="9c043-430">Bloccare le cassette postali per preservarne i contenuti.</span><span class="sxs-lookup"><span data-stu-id="9c043-430">Place mailboxes on hold to preserve content.</span></span>
    
  - <span data-ttu-id="9c043-431">Usare gli strumenti di Microsoft eDiscovery per cercare contenuti nelle cassette postali.</span><span class="sxs-lookup"><span data-stu-id="9c043-431">Use Microsoft eDiscovery tools to search for content in mailboxes.</span></span>
    
  - <span data-ttu-id="9c043-432">Utilizzare criteri di conservazione per controllare la durata di conservazione dei contenuti della cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="9c043-432">Use retention policies to control how long mailbox content is retained.</span></span>
    
  - <span data-ttu-id="9c043-433">Eseguire una ricerca nel registro di controllo di Office 365 per gli eventi relativi alle cassette postali.</span><span class="sxs-lookup"><span data-stu-id="9c043-433">Search the Office 365 audit log for mailbox-related events.</span></span>
    
  - <span data-ttu-id="9c043-434">Il servizio offre protezione da perdita dei dati.</span><span class="sxs-lookup"><span data-stu-id="9c043-434">It helps protect against data loss.</span></span> <span data-ttu-id="9c043-435">I file PST che vengono importati nelle cassette postali di Office 365 ereditano le funzionalità di disponibilità elevata di Exchange Online, anziché l'archiviazione dei dati nel computer di un utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-435">PST files that are imported to Office 365 mailboxes inherit the high availability features of Exchange Online, as opposed to storing the data on a user's computer.</span></span>
    
  - <span data-ttu-id="9c043-436">I dati sono disponibili per l'utente da tutti i dispositivi in quanto vengono memorizzati nel cloud.</span><span class="sxs-lookup"><span data-stu-id="9c043-436">The data is available to the user from all devices because it's stored in the cloud.</span></span>
    
- <span data-ttu-id="9c043-437">Di seguito è riportato un esempio delle chiavi, degli ID e degli URL ottenuti nei passaggi 2, 3 e 4.</span><span class="sxs-lookup"><span data-stu-id="9c043-437">Here's an example of the keys, IDs, and URLs that are obtained in Steps 2, 3, and 4.</span></span> <span data-ttu-id="9c043-438">In questo esempio viene inoltre contenuta la sintassi del comando eseguito nello strumento O365ImportTool. exe per crittografare e caricare i file PST in Office 365.</span><span class="sxs-lookup"><span data-stu-id="9c043-438">This example also contains the syntax for the command that you run in the O365ImportTool.exe tool to encrypt and upload PST files to Office 365.</span></span> <span data-ttu-id="9c043-439">Adottare le dovute precauzioni per proteggere tali file nello stesso in modo in cui vengono protette password o altre informazioni di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="9c043-439">Be sure to take precautions to protect these just like you would protect passwords or other security-related information.</span></span>
    
  ```
  Symmetric key: l+R+Umc5RGmSBh1oW+DoyMxm/h5h2JJXFcNOFiNp867=

  BPOSId: 42745b33-2a5c-4726-8a2a-ca43caa0f74b

  LicensingIntranetDistributionPointUrl (RMS licensing location): https://afcbd8ec-cb2b-4a1a-8246-0b4bc22d1978.rms.na.aadrm.com/_wmcs/licensing
  
  SAS URL: https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D
  
  O365ImportTool.exe /srcdir:<Location of PST files> /protect-rmsserver:<RMS licensing location> /protect-tenantid:<BPOSId> /protect-key:<Symmetric key> /transfer:upload /upload-dest:<Network upload URL from the SAS URL> /upload-destSAS:<SAS key from the SAS URL>
  
  EXAMPLES
  
  This example uploads PST files to the root of the Azure storage location:

  O365ImportTool.exe /srcdir:\\FILESERVER01\PSTs /protect-rmsserver:"https://afcbd8ec-cb2b-4a1a-8246-0b4bc22d1978.rms.na.aadrm.com/_wmcs/licensing" /protect-tenantid:42745b33-2a5c-4726-8a2a-ca43caa0f74b /protect-ownerid:45beb445-4d06-47df-8e61-6ca1a88a080e /protect-key:"l+R+Umc5RGmSBh1oW+DoyMxm/h5h2JJXFcNOFiNp867=" /transfer:upload /upload-dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata" /upload-destSAS:"?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"
  
  This example uploads PST files to a subfolder named EncryptedPSTs  in the Azure storage location:
  
  O365ImportTool.exe /srcdir:\\FILESERVER01\PSTs /protect-rmsserver:"https://afcbd8ec-cb2b-4a1a-8246-0b4bc22d1978.rms.na.aadrm.com/_wmcs/licensing" /protect-tenantid:42745b33-2a5c-4726-8a2a-ca43caa0f74b /protect-ownerid:45beb445-4d06-47df-8e61-6ca1a88a080e /protect-key:"l+R+Umc5RGmSBh1oW+DoyMxm/h5h2JJXFcNOFiNp867=" /transfer:upload /upload-dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/EncryptedPSTs" /upload-destSAS:"?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"
  ```

- <span data-ttu-id="9c043-440">Come spiegato in precedenza, il servizio di importazione di Office 365 attiva l'impostazione di conservazione (per una durata indefinita) dopo l'importazione dei file PST in una cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="9c043-440">As previously explained, the Office 365 Import service turns on the retention hold setting (for an indefinite duration) after PST files are imported to a mailbox.</span></span> <span data-ttu-id="9c043-441">Questo significa che la proprietà *RentionHoldEnabled* è impostata `True` in modo che il criterio di conservazione assegnato alla cassetta postale non venga elaborato.</span><span class="sxs-lookup"><span data-stu-id="9c043-441">This means the  *RentionHoldEnabled*  property is set to  `True` so that the retention policy assigned to the mailbox won't be processed.</span></span> <span data-ttu-id="9c043-442">In questo modo il proprietario della cassetta postale è in grado di gestire i messaggi appena importati impedendo l'eliminazione o l'archiviazione dei messaggi meno recenti.</span><span class="sxs-lookup"><span data-stu-id="9c043-442">This gives the mailbox owner time to manage the newly-imported messages by preventing a deletion or archive policy from deleting or archiving older messages.</span></span> <span data-ttu-id="9c043-443">Di seguito sono riportati alcuni passaggi che è possibile eseguire per gestire questo blocco di conservazione:</span><span class="sxs-lookup"><span data-stu-id="9c043-443">Here are some steps you can take to manage this retention hold:</span></span> 
    
  - <span data-ttu-id="9c043-444">Dopo un determinato periodo di tempo, è possibile disattivare il blocco di conservazione eseguendo il `Set-Mailbox -RetentionHoldEnabled $false` comando.</span><span class="sxs-lookup"><span data-stu-id="9c043-444">After a certain period of time, you can turn off the retention hold by running the  `Set-Mailbox -RetentionHoldEnabled $false` command.</span></span> <span data-ttu-id="9c043-445">Per le istruzioni, vedere [posizionare una cassetta postale sul blocco di conservazione](https://go.microsoft.com/fwlink/p/?LinkId=544749).</span><span class="sxs-lookup"><span data-stu-id="9c043-445">For instructions, see [Place a mailbox on retention hold](https://go.microsoft.com/fwlink/p/?LinkId=544749).</span></span>
    
  - <span data-ttu-id="9c043-446">È possibile configurare il blocco di conservazione in modo che sia disattivata in futuro.</span><span class="sxs-lookup"><span data-stu-id="9c043-446">You can configure the retention hold so that it's turned off on some date in the future.</span></span> <span data-ttu-id="9c043-447">A tale scopo, eseguire il `Set-Mailbox -EndDateForRetentionHold <date>` comando.</span><span class="sxs-lookup"><span data-stu-id="9c043-447">You do this by running the  `Set-Mailbox -EndDateForRetentionHold <date>` command.</span></span> <span data-ttu-id="9c043-448">Ad esempio, presupponendo che la data odierna sia il 1 ° giugno 2016 e che si desideri disattivare il blocco di conservazione in 30 giorni, è necessario `Set-Mailbox -EndDateForRetentionHold 7/1/2016`eseguire il comando seguente:.</span><span class="sxs-lookup"><span data-stu-id="9c043-448">For example, assuming that today's date is June 1, 2016 and you want the retention hold turned off in 30 days, you would run the following command:  `Set-Mailbox -EndDateForRetentionHold 7/1/2016`.</span></span> <span data-ttu-id="9c043-449">In questo scenario, si lascerà la proprietà *RentionHoldEnabled* impostata su `True`.</span><span class="sxs-lookup"><span data-stu-id="9c043-449">In this scenario, you would leave the  *RentionHoldEnabled*  property set to `True`.</span></span> <span data-ttu-id="9c043-450">Per ulteriori informazioni, vedere [Set-Mailbox](https://go.microsoft.com/fwlink/p/?LinkId=150317).</span><span class="sxs-lookup"><span data-stu-id="9c043-450">For more information, see [Set-Mailbox](https://go.microsoft.com/fwlink/p/?LinkId=150317).</span></span>
    
  - <span data-ttu-id="9c043-451">È possibile modificare le impostazioni per i criteri di conservazione assegnati alla cassetta postale, in modo che gli elementi meno recenti importati non vengano immediatamente eliminati o spostati nella cassetta postale di archiviazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9c043-451">You can change the settings for the retention policy that's assigned to the mailbox so that older items that were imported won't be immediately deleted or moved to the user's archive mailbox.</span></span> <span data-ttu-id="9c043-452">Ad esempio, è possibile estendere l'età di conservazione per un criterio di eliminazione o di archiviazione assegnato alla cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="9c043-452">For example, you could lengthen the retention age for a deletion or archive policy that's assigned to the mailbox.</span></span> <span data-ttu-id="9c043-453">In questo scenario, è necessario disattivare il blocco di conservazione sulla cassetta postale dopo aver modificato le impostazioni del criterio di conservazione.</span><span class="sxs-lookup"><span data-stu-id="9c043-453">In this scenario, you would turn off the retention hold on the mailbox after you changed the settings of the retention policy.</span></span> <span data-ttu-id="9c043-454">Per ulteriori informazioni, vedere [configurare un criterio di archiviazione ed eliminazione per le cassette postali nell'organizzazione di Office 365](set-up-an-archive-and-deletion-policy-for-mailboxes.md).</span><span class="sxs-lookup"><span data-stu-id="9c043-454">For more information, see [Set up an archive and deletion policy for mailboxes in your Office 365 organization](set-up-an-archive-and-deletion-policy-for-mailboxes.md).</span></span>
